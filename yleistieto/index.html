<!DOCTYPE html>
<html lang="en"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.30">

  <title>Tilastotietoa Kangasalta</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script type="module" src="index_files/libs/quarto-ojs/quarto-ojs-runtime.js"></script>
  <link href="index_files/libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
  <script src="index_files/libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
  <script src="index_files/libs/plotly-binding-4.10.0/plotly.js"></script>
  <script src="index_files/libs/typedarray-0.1/typedarray.min.js"></script>
  <script src="index_files/libs/jquery-3.5.1/jquery.min.js"></script>
  <link href="index_files/libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
  <script src="index_files/libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
  <link href="index_files/libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
  <script src="index_files/libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-opacity="1" class="quarto-title-block center">
  <h1 class="title">Tilastotietoa Kangasalta</h1>
  <p class="subtitle">versio 0.9</p>

<div class="quarto-title-authors">
</div>

  <p class="date">8/12/22</p>
</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Sisällysluettelo</h2>
<ul>
<li><a href="#/väestö" id="/toc-väestö"><span class="toc-section-number">1</span>  Väestö</a>
<ul>
<li><a href="#/kangasala" id="/toc-kangasala"><span class="toc-section-number">1.1</span>  Kangasala</a></li>
<li><a href="#/pienalueet-12" id="/toc-pienalueet-12"><span class="toc-section-number">1.2</span>  Pienalueet (1/2)</a></li>
<li><a href="#/pienalueet-22" id="/toc-pienalueet-22"><span class="toc-section-number">1.3</span>  Pienalueet (2/2)</a></li>
<li><a href="#/naapurikunnat" id="/toc-naapurikunnat"><span class="toc-section-number">1.4</span>  Naapurikunnat</a></li>
<li><a href="#/ennakkotiedot---kangasala" id="/toc-ennakkotiedot---kangasala"><span class="toc-section-number">1.5</span>  Ennakkotiedot - Kangasala</a></li>
<li><a href="#/ennakkotiedot-naapurikunnat" id="/toc-ennakkotiedot-naapurikunnat"><span class="toc-section-number">1.6</span>  Ennakkotiedot naapurikunnat</a></li>
</ul></li>
<li><a href="#/ikäryhmät" id="/toc-ikäryhmät"><span class="toc-section-number">2</span>  Ikäryhmät</a>
<ul>
<li><a href="#/väestöpyramidi" id="/toc-väestöpyramidi"><span class="toc-section-number">2.1</span>  Väestöpyramidi</a></li>
<li><a href="#/ikäryhmät-1" id="/toc-ikäryhmät-1"><span class="toc-section-number">2.2</span>  Ikäryhmät</a></li>
</ul></li>
<li><a href="#/syntyneet" id="/toc-syntyneet"><span class="toc-section-number">3</span>  Syntyneet</a>
<ul>
<li><a href="#/kangasala-1" id="/toc-kangasala-1"><span class="toc-section-number">3.1</span>  Kangasala</a></li>
<li><a href="#/naapurikunnat-1" id="/toc-naapurikunnat-1"><span class="toc-section-number">3.2</span>  Naapurikunnat</a></li>
</ul></li>
<li><a href="#/muuttoliike" id="/toc-muuttoliike"><span class="toc-section-number">4</span>  Muuttoliike</a>
<ul>
<li><a href="#/kangasalan-muuttoliike-kuntiin-2021" id="/toc-kangasalan-muuttoliike-kuntiin-2021"><span class="toc-section-number">4.1</span>  Kangasalan muuttoliike kuntiin 2021</a></li>
<li><a href="#/kangasalan-ja-tampereen-pienalueiden-muuttoliike-2021" id="/toc-kangasalan-ja-tampereen-pienalueiden-muuttoliike-2021"><span class="toc-section-number">4.2</span>  Kangasalan ja Tampereen pienalueiden muuttoliike 2021</a></li>
<li><a href="#/kangasalan-ja-lempäälän-pienalueiden-muuttoliike-2021" id="/toc-kangasalan-ja-lempäälän-pienalueiden-muuttoliike-2021"><span class="toc-section-number">4.3</span>  Kangasalan ja Lempäälän pienalueiden muuttoliike 2021</a></li>
<li><a href="#/kangasalan-ja-nokian-pienalueiden-muuttoliike-2021" id="/toc-kangasalan-ja-nokian-pienalueiden-muuttoliike-2021"><span class="toc-section-number">4.4</span>  Kangasalan ja Nokian pienalueiden muuttoliike 2021</a></li>
<li><a href="#/kangasalan-ja-oriveden-pienalueiden-muuttoliike-2021" id="/toc-kangasalan-ja-oriveden-pienalueiden-muuttoliike-2021"><span class="toc-section-number">4.5</span>  Kangasalan ja Oriveden pienalueiden muuttoliike 2021</a></li>
<li><a href="#/kangasalan-ja-pirkkalan-pienalueiden-muuttoliike-2021" id="/toc-kangasalan-ja-pirkkalan-pienalueiden-muuttoliike-2021"><span class="toc-section-number">4.6</span>  Kangasalan ja Pirkkalan pienalueiden muuttoliike 2021</a></li>
<li><a href="#/kangasalan-ja-pälkäneen-pienalueiden-muuttoliike-2021" id="/toc-kangasalan-ja-pälkäneen-pienalueiden-muuttoliike-2021"><span class="toc-section-number">4.7</span>  Kangasalan ja Pälkäneen pienalueiden muuttoliike 2021</a></li>
<li><a href="#/kangasalan-ja-akaan-pienalueiden-muuttoliike-2021" id="/toc-kangasalan-ja-akaan-pienalueiden-muuttoliike-2021"><span class="toc-section-number">4.8</span>  Kangasalan ja Akaan pienalueiden muuttoliike 2021</a></li>
<li><a href="#/kangasalan-ja-valkeakosken-pienalueiden-muuttoliike-2021" id="/toc-kangasalan-ja-valkeakosken-pienalueiden-muuttoliike-2021"><span class="toc-section-number">4.9</span>  Kangasalan ja Valkeakosken pienalueiden muuttoliike 2021</a></li>
<li><a href="#/kangasalan-ja-ylöjärven-pienalueiden-muuttoliike-2021" id="/toc-kangasalan-ja-ylöjärven-pienalueiden-muuttoliike-2021"><span class="toc-section-number">4.10</span>  Kangasalan ja Ylöjärven pienalueiden muuttoliike 2021</a></li>
<li><a href="#/nettomuutto---kangasala" id="/toc-nettomuutto---kangasala"><span class="toc-section-number">4.11</span>  Nettomuutto - Kangasala</a></li>
<li><a href="#/nettomuutto---naapurikunnat" id="/toc-nettomuutto---naapurikunnat"><span class="toc-section-number">4.12</span>  Nettomuutto - Naapurikunnat</a></li>
<li><a href="#/väestönlisäys" id="/toc-väestönlisäys"><span class="toc-section-number">4.13</span>  Väestönlisäys</a></li>
</ul></li>
<li><a href="#/väestöennusteet" id="/toc-väestöennusteet"><span class="toc-section-number">5</span>  Väestöennusteet</a>
<ul>
<li><a href="#/toteutunut-väestökehitys-ja-vertailu-eri-väestöennusteisiin" id="/toc-toteutunut-väestökehitys-ja-vertailu-eri-väestöennusteisiin"><span class="toc-section-number">5.1</span>  Toteutunut väestökehitys ja vertailu eri väestöennusteisiin</a></li>
</ul></li>
</ul>
</nav>
</section>
<section>
<section id="väestö" class="title-slide slide level1 center" data-number="1">
<h1><span class="header-section-number">1</span> Väestö</h1>

</section>
<section id="kangasala" class="slide level2" data-number="1.1">
<h2><span class="header-section-number">1.1</span> Kangasala</h2>
<!--- Tilastokeskus --->
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-045cca11f6f4811d8e5b" style="width:960px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-045cca11f6f4811d8e5b">{"x":{"visdat":{"2904542914f":["function () ","plotlyVisDat"]},"cur_data":"2904542914f","attrs":{"2904542914f":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":50,"l":50,"t":100,"r":50,"pad":3},"autosize":true,"title":"<b>Väkiluvun kehitys<\/b>","legend":{"orientation":"h","x":0,"y":-0.3},"paper_bgcolor":"rgba(0,0,0,0)","plot_bgcolor":"rgba(0,0,0,0)","showlegend":true,"xaxis":{"domain":[0,1],"automargin":true,"title":"<b>Vuodet<\/b>","type":"category","categoryorder":"array","categoryarray":["1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"<b>Lkm<\/b>","tickformat":"d"},"hovermode":"closest"},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false},"data":[{"x":["1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[23589,23656,24054,24407,24634,24826,25105,25056,25106,25046,25119,25133,25285,25630,25922,26341,26778,27303,27927,28407,28809,29282,29522,29675,29891,30126,30345,30471,30607,31190,31437,31676,31868,32214,32622],"mode":"lines+markers","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="pienalueet-12" class="slide level2" data-number="1.2">
<h2><span class="header-section-number">1.2</span> Pienalueet (1/2)</h2>
<!--- Github --->
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-e53e195385fa7cc6f209" style="width:960px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-e53e195385fa7cc6f209">{"x":{"data":[{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[1678,1763,1825,1841,1957,1946,2039,2083,2109,2098,2127,2138],"mode":"lines","line":{"color":"rgb(0,150,81)","shape":"spline","width":2},"name":"Asema","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[240,236,246,246,243,243,245,237,234,227,231,236],"mode":"lines","line":{"color":"rgb(0,150,81)","shape":"spline","width":2},"name":"Haapaniemi","type":"scatter","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x2","yaxis":"y2","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[1561,1587,1592,1602,1613,1589,1581,1577,1573,1570,1576,1580],"mode":"lines","line":{"color":"rgb(0,150,81)","shape":"spline","width":2},"name":"Huutijärvi","type":"scatter","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x3","yaxis":"y3","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[1386,1351,1323,1342,1338,1340,1366,1347,1354,1333,1395,1462],"mode":"lines","line":{"color":"rgb(0,150,81)","shape":"spline","width":2},"name":"Ilkko","type":"scatter","marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x4","yaxis":"y4","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[4799,4808,4818,4828,4839,4836,4962,5004,5113,5331,5588,5801],"mode":"lines","line":{"color":"rgb(0,150,81)","shape":"spline","width":2},"name":"Keskusta","type":"scatter","marker":{"color":"rgba(148,103,189,1)","line":{"color":"rgba(148,103,189,1)"}},"error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"xaxis":"x5","yaxis":"y5","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[597,593,602,605,600,579,575,557,560,551,564,557],"mode":"lines","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"name":"Kuhmalahden kirkonkylä","type":"scatter","marker":{"color":"rgba(140,86,75,1)","line":{"color":"rgba(140,86,75,1)"}},"error_y":{"color":"rgba(140,86,75,1)"},"error_x":{"color":"rgba(140,86,75,1)"},"xaxis":"x6","yaxis":"y6","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[191,194,186,189,177,183,184,175,174,177,177,187],"mode":"lines","line":{"color":"rgb(0,150,81)","shape":"spline","width":2},"name":"Kuohenmaa","type":"scatter","marker":{"color":"rgba(227,119,194,1)","line":{"color":"rgba(227,119,194,1)"}},"error_y":{"color":"rgba(227,119,194,1)"},"error_x":{"color":"rgba(227,119,194,1)"},"xaxis":"x7","yaxis":"y7","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[338,338,345,353,343,347,360,359,350,351,348,342],"mode":"lines","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"name":"Lahdenkulma","type":"scatter","marker":{"color":"rgba(127,127,127,1)","line":{"color":"rgba(127,127,127,1)"}},"error_y":{"color":"rgba(127,127,127,1)"},"error_x":{"color":"rgba(127,127,127,1)"},"xaxis":"x8","yaxis":"y8","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[0,0,0,0,0,0,0,0,0,0,0,0],"mode":"lines","line":{"color":"rgba(188,189,34,1)","shape":"spline","width":2},"name":"Lamminrahka","type":"scatter","marker":{"color":"rgba(188,189,34,1)","line":{"color":"rgba(188,189,34,1)"}},"error_y":{"color":"rgba(188,189,34,1)"},"error_x":{"color":"rgba(188,189,34,1)"},"xaxis":"x9","yaxis":"y9","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[4885,4879,5009,5042,5025,5024,5244,5377,5444,5539,5494,5591],"mode":"lines","line":{"color":"rgb(0,150,81)","shape":"spline","width":2},"name":"Lentola","type":"scatter","marker":{"color":"rgba(23,190,207,1)","line":{"color":"rgba(23,190,207,1)"}},"error_y":{"color":"rgba(23,190,207,1)"},"error_x":{"color":"rgba(23,190,207,1)"},"xaxis":"x10","yaxis":"y10","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[158,164,161,164,161,148,152,152,153,154,151,144],"mode":"lines","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"name":"Lihasula","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x11","yaxis":"y11","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[540,536,524,511,493,495,486,470,469,452,451,466],"mode":"lines","line":{"color":"rgb(0,150,81)","shape":"spline","width":2},"name":"Pakkala","type":"scatter","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x12","yaxis":"y12","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[304,298,282,285,277,266,270,260,260,254,250,249],"mode":"lines","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"name":"Pohja","type":"scatter","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x13","yaxis":"y13","frame":null}],"layout":{"xaxis":{"domain":[0,0.18],"automargin":true,"anchor":"y"},"xaxis2":{"domain":[0.22,0.38],"automargin":true,"anchor":"y2"},"xaxis3":{"domain":[0.42,0.58],"automargin":true,"anchor":"y3"},"xaxis4":{"domain":[0.62,0.78],"automargin":true,"anchor":"y4"},"xaxis5":{"domain":[0.82,1],"automargin":true,"anchor":"y5"},"xaxis6":{"domain":[0,0.18],"automargin":true,"anchor":"y6"},"xaxis7":{"domain":[0.22,0.38],"automargin":true,"anchor":"y7"},"xaxis8":{"domain":[0.42,0.58],"automargin":true,"anchor":"y8"},"xaxis9":{"domain":[0.62,0.78],"automargin":true,"anchor":"y9"},"xaxis10":{"domain":[0.82,1],"automargin":true,"anchor":"y10"},"xaxis11":{"domain":[0,0.18],"automargin":true,"anchor":"y11"},"xaxis12":{"domain":[0.22,0.38],"automargin":true,"anchor":"y12"},"xaxis13":{"domain":[0.42,0.58],"automargin":true,"anchor":"y13"},"yaxis13":{"domain":[0,0.313333333333333],"automargin":true,"anchor":"x13"},"yaxis12":{"domain":[0,0.313333333333333],"automargin":true,"anchor":"x12"},"yaxis11":{"domain":[0,0.313333333333333],"automargin":true,"anchor":"x11"},"yaxis10":{"domain":[0.353333333333333,0.646666666666667],"automargin":true,"anchor":"x10"},"yaxis9":{"domain":[0.353333333333333,0.646666666666667],"automargin":true,"anchor":"x9"},"yaxis8":{"domain":[0.353333333333333,0.646666666666667],"automargin":true,"anchor":"x8"},"yaxis7":{"domain":[0.353333333333333,0.646666666666667],"automargin":true,"anchor":"x7"},"yaxis6":{"domain":[0.353333333333333,0.646666666666667],"automargin":true,"anchor":"x6"},"yaxis5":{"domain":[0.686666666666667,1],"automargin":true,"anchor":"x5"},"yaxis4":{"domain":[0.686666666666667,1],"automargin":true,"anchor":"x4"},"yaxis3":{"domain":[0.686666666666667,1],"automargin":true,"anchor":"x3"},"yaxis2":{"domain":[0.686666666666667,1],"automargin":true,"anchor":"x2"},"yaxis":{"domain":[0.686666666666667,1],"automargin":true,"anchor":"x","title":false,"tickformat":"d"},"annotations":[{"x":0.1,"y":0.9,"text":"<b>Asema<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.3,"y":0.9,"text":"<b>Haapaniemi<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.5,"y":0.9,"text":"<b>Huutijärvi<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.7,"y":0.9,"text":"<b>Ilkko<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.9,"y":0.9,"text":"<b>Keskusta<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.1,"y":0.5,"text":"<b>Kuhmalahden kirkonkylä<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.3,"y":0.5,"text":"<b>Kuohenmaa<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.5,"y":0.5,"text":"<b>Lahdenkulma<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.7,"y":0.5,"text":"<b>Lamminrahka<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.9,"y":0.5,"text":"<b>Lentola<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.1,"y":0.2,"text":"<b>Lihasula<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.3,"y":0.2,"text":"<b>Pakkala<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.5,"y":0.2,"text":"<b>Pohja<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false}],"shapes":[],"images":[],"margin":{"b":100,"l":100,"t":100,"r":100,"pad":4},"hovermode":"closest","showlegend":false,"autosize":true,"title":"<b>Väkiluvun kehitys pienalueittain<\/b>"},"attrs":{"29047a464265":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(0,150,81)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"29041cb67cd8":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(0,150,81)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"290421e13ce":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(0,150,81)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"290476777554":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(0,150,81)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"2904b5f632c":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(0,150,81)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"290413c34bc6":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"2904722043a5":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(0,150,81)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"2904758c6b37":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"290424172c2f":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"290455752d8":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(0,150,81)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"2904560d6b0a":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"2904164d459e":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(0,150,81)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"29042d90728d":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"subplot":true,"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="pienalueet-22" class="slide level2" data-number="1.3">
<h2><span class="header-section-number">1.3</span> Pienalueet (2/2)</h2>
<!--- Github --->
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-a08bb245b6fc60b45227" style="width:960px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a08bb245b6fc60b45227">{"x":{"data":[{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[372,368,351,353,341,344,337,331,320,329,324,316],"mode":"lines","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"name":"Raikku","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[1344,1358,1342,1320,1326,1336,1322,1307,1284,1287,1303,1335],"mode":"lines","line":{"color":"rgb(0,150,81)","shape":"spline","width":2},"name":"Ranta-Koivisto","type":"scatter","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x2","yaxis":"y2","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[651,651,653,659,664,654,636,628,622,611,621,622],"mode":"lines","line":{"color":"rgb(0,150,81)","shape":"spline","width":2},"name":"Raudanmaa","type":"scatter","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x3","yaxis":"y3","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[780,766,775,767,802,806,788,793,814,803,827,852],"mode":"lines","line":{"color":"rgb(0,150,81)","shape":"spline","width":2},"name":"Riku","type":"scatter","marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x4","yaxis":"y4","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[2641,2672,2742,2860,2897,2919,2946,2966,2974,2956,2924,2935],"mode":"lines","line":{"color":"rgb(0,150,81)","shape":"spline","width":2},"name":"Ruutana","type":"scatter","marker":{"color":"rgba(148,103,189,1)","line":{"color":"rgba(148,103,189,1)"}},"error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"xaxis":"x5","yaxis":"y5","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[366,361,373,365,368,369,374,369,366,363,359,349],"mode":"lines","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"name":"Saarenmaa","type":"scatter","marker":{"color":"rgba(140,86,75,1)","line":{"color":"rgba(140,86,75,1)"}},"error_y":{"color":"rgba(140,86,75,1)"},"error_x":{"color":"rgba(140,86,75,1)"},"xaxis":"x6","yaxis":"y6","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[236,234,225,224,228,225,222,225,228,229,217,212],"mode":"lines","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"name":"Saarikylät","type":"scatter","marker":{"color":"rgba(227,119,194,1)","line":{"color":"rgba(227,119,194,1)"}},"error_y":{"color":"rgba(227,119,194,1)"},"error_x":{"color":"rgba(227,119,194,1)"},"xaxis":"x7","yaxis":"y7","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[1491,1471,1458,1430,1403,1426,1436,1431,1420,1385,1344,1320],"mode":"lines","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"name":"Sahalahti","type":"scatter","marker":{"color":"rgba(127,127,127,1)","line":{"color":"rgba(127,127,127,1)"}},"error_y":{"color":"rgba(127,127,127,1)"},"error_x":{"color":"rgba(127,127,127,1)"},"xaxis":"x8","yaxis":"y8","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[884,901,911,915,922,917,902,896,882,885,878,872],"mode":"lines","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"name":"Suinula","type":"scatter","marker":{"color":"rgba(188,189,34,1)","line":{"color":"rgba(188,189,34,1)"}},"error_y":{"color":"rgba(188,189,34,1)"},"error_x":{"color":"rgba(188,189,34,1)"},"xaxis":"x9","yaxis":"y9","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[165,189,188,198,198,192,201,199,190,204,209,196],"mode":"lines","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"name":"Tiihala","type":"scatter","marker":{"color":"rgba(23,190,207,1)","line":{"color":"rgba(23,190,207,1)"}},"error_y":{"color":"rgba(23,190,207,1)"},"error_x":{"color":"rgba(23,190,207,1)"},"xaxis":"x10","yaxis":"y10","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[307,301,302,304,305,310,299,292,303,299,321,314],"mode":"lines","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"name":"Vääksy","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x11","yaxis":"y11","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[3458,3555,3594,3641,3647,3794,3907,4056,4105,4108,4161,4174],"mode":"lines","line":{"color":"rgb(0,150,81)","shape":"spline","width":2},"name":"Vatiala","type":"scatter","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x12","yaxis":"y12","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[147,151,148,147,139,138,138,134,133,132,129,131],"mode":"lines","line":{"color":"rgb(0,150,81)","shape":"spline","width":2},"name":"Vehkajärvi","type":"scatter","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x13","yaxis":"y13","frame":null}],"layout":{"xaxis":{"domain":[0,0.18],"automargin":true,"anchor":"y"},"xaxis2":{"domain":[0.22,0.38],"automargin":true,"anchor":"y2"},"xaxis3":{"domain":[0.42,0.58],"automargin":true,"anchor":"y3"},"xaxis4":{"domain":[0.62,0.78],"automargin":true,"anchor":"y4"},"xaxis5":{"domain":[0.82,1],"automargin":true,"anchor":"y5"},"xaxis6":{"domain":[0,0.18],"automargin":true,"anchor":"y6"},"xaxis7":{"domain":[0.22,0.38],"automargin":true,"anchor":"y7"},"xaxis8":{"domain":[0.42,0.58],"automargin":true,"anchor":"y8"},"xaxis9":{"domain":[0.62,0.78],"automargin":true,"anchor":"y9"},"xaxis10":{"domain":[0.82,1],"automargin":true,"anchor":"y10"},"xaxis11":{"domain":[0,0.18],"automargin":true,"anchor":"y11"},"xaxis12":{"domain":[0.22,0.38],"automargin":true,"anchor":"y12"},"xaxis13":{"domain":[0.42,0.58],"automargin":true,"anchor":"y13"},"yaxis13":{"domain":[0,0.313333333333333],"automargin":true,"anchor":"x13"},"yaxis12":{"domain":[0,0.313333333333333],"automargin":true,"anchor":"x12"},"yaxis11":{"domain":[0,0.313333333333333],"automargin":true,"anchor":"x11"},"yaxis10":{"domain":[0.353333333333333,0.646666666666667],"automargin":true,"anchor":"x10"},"yaxis9":{"domain":[0.353333333333333,0.646666666666667],"automargin":true,"anchor":"x9"},"yaxis8":{"domain":[0.353333333333333,0.646666666666667],"automargin":true,"anchor":"x8"},"yaxis7":{"domain":[0.353333333333333,0.646666666666667],"automargin":true,"anchor":"x7"},"yaxis6":{"domain":[0.353333333333333,0.646666666666667],"automargin":true,"anchor":"x6"},"yaxis5":{"domain":[0.686666666666667,1],"automargin":true,"anchor":"x5"},"yaxis4":{"domain":[0.686666666666667,1],"automargin":true,"anchor":"x4"},"yaxis3":{"domain":[0.686666666666667,1],"automargin":true,"anchor":"x3"},"yaxis2":{"domain":[0.686666666666667,1],"automargin":true,"anchor":"x2"},"yaxis":{"domain":[0.686666666666667,1],"automargin":true,"anchor":"x","title":"<b>Lkm<\/b>","tickformat":"d"},"annotations":[{"x":0.1,"y":0.9,"text":"<b>Raikku<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.3,"y":0.9,"text":"<b>Ranta-Koivisto<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.5,"y":0.9,"text":"<b>Raudanmaa<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.7,"y":0.9,"text":"<b>Riku<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.9,"y":0.9,"text":"<b>Ruutana<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.1,"y":0.5,"text":"<b>Saarenmaa<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.3,"y":0.5,"text":"<b>Saarikylät<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.5,"y":0.5,"text":"<b>Sahalahti<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.7,"y":0.5,"text":"<b>Suinula<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.9,"y":0.5,"text":"<b>Tiihala<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.1,"y":0.2,"text":"<b>Vääksy<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.3,"y":0.2,"text":"<b>Vatiala<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false},{"x":0.5,"y":0.2,"text":"<b>Vehkajäri<\/b>","xref":"paper","yref":"paper","xanchor":"center","yanchor":"bottom","showarrow":false}],"shapes":[],"images":[],"margin":{"b":100,"l":100,"t":100,"r":100,"pad":4},"hovermode":"closest","showlegend":false,"autosize":true,"title":"<b>Väkiluvun kehitys pienalueittain<\/b>"},"attrs":{"290432e86326":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"29042ecb4401":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(0,150,81)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"29041f4c769d":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(0,150,81)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"2904260d1ac0":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(0,150,81)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"29045b553098":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(0,150,81)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"29046fd74cf1":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"290441b27864":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"2904267358d6":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"29047a1e7ff2":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"290443884e91":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"29048f1c20":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"2904eca8b":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(0,150,81)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"29042cb0723a":{"x":{},"y":{},"mode":"lines","line":{"shape":"spline","color":"rgb(0,150,81)","width":2},"name":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"subplot":true,"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="naapurikunnat" class="slide level2" data-number="1.4">
<h2><span class="header-section-number">1.4</span> Naapurikunnat</h2>
<!--- Tilastokeskus --->
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-ddfd55c23d6718a6ce6d" style="width:960px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ddfd55c23d6718a6ce6d">{"x":{"visdat":{"29044d921ec1":["function () ","plotlyVisDat"]},"cur_data":"29044d921ec1","attrs":{"29044d921ec1":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"29044d921ec1.1":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(252,179,22)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(252,179,22)","width":2}},"name":"Lempäälä","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"29044d921ec1.2":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(230,73,37)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(230,73,37)","width":2}},"name":"Nokia","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"29044d921ec1.3":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(40,51,108)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(40,51,108)","width":2}},"name":"Pirkkala","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"29044d921ec1.4":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(0,173,197)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(0,173,197)","width":2}},"name":"Ylöjärvi","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":50,"l":50,"t":100,"r":50,"pad":3},"autosize":true,"legend":{"orientation":"h","x":0,"y":-0.3},"paper_bgcolor":"rgba(0,0,0,0)","plot_bgcolor":"rgba(0,0,0,0)","title":"<b>Väkiluvun kehitys<\/b>","xaxis":{"domain":[0,1],"automargin":true,"title":"<b>Vuodet<\/b>","type":"category","categoryorder":"array","categoryarray":["1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"<b>Lkm<\/b>","tickformat":"d"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false},"data":[{"x":["1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[23589,23656,24054,24407,24634,24826,25105,25056,25106,25046,25119,25133,25285,25630,25922,26341,26778,27303,27927,28407,28809,29282,29522,29675,29891,30126,30345,30471,30607,31190,31437,31676,31868,32214,32622],"mode":"lines+markers","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[13926,14159,14441,14564,14767,14892,15106,15272,15395,15386,15568,15705,15964,16331,16761,17098,17397,17733,18248,18702,19271,19753,20178,20588,20888,21440,21829,22233,22536,22745,22829,23206,23523,23828,24164],"mode":"lines+markers","line":{"color":"rgb(252,179,22)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(252,179,22)","width":2}},"name":"Lempäälä","type":"scatter","error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[24811,25344,25807,26063,26173,26187,26318,26318,26287,26326,26476,26499,26691,26905,27298,27653,28090,28604,29147,29740,30485,30951,31357,31647,32056,32354,32690,32847,33162,33210,33322,33527,33929,34476,34884],"mode":"lines+markers","line":{"color":"rgb(230,73,37)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(230,73,37)","width":2}},"name":"Nokia","type":"scatter","error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[10875,11143,11285,11409,11440,11649,11732,11691,11723,11759,11852,12056,12358,12736,13280,13684,14322,14560,14875,15268,15788,16154,16515,17237,17763,18128,18369,18689,18913,19163,19237,19368,19623,19803,20206],"mode":"lines+markers","line":{"color":"rgb(40,51,108)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(40,51,108)","width":2}},"name":"Pirkkala","type":"scatter","error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[22322,22765,23103,23434,23712,23922,24137,24232,24223,24439,24582,24805,25070,25299,25747,26060,26502,27178,27876,28466,29148,29762,30175,30500,30942,31515,31743,32260,32738,32799,32878,32983,33254,33352,33533],"mode":"lines+markers","line":{"color":"rgb(0,173,197)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(0,173,197)","width":2}},"name":"Ylöjärvi","type":"scatter","error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="ennakkotiedot---kangasala" class="slide level2" data-number="1.5">
<h2><span class="header-section-number">1.5</span> Ennakkotiedot - Kangasala</h2>
<!--- Tilastokeskus --->
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-13c738b98f4870d1de2b" style="width:960px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-13c738b98f4870d1de2b">{"x":{"visdat":{"29041088d4f":["function () ","plotlyVisDat"]},"cur_data":"29041088d4f","attrs":{"29041088d4f":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":50,"l":50,"t":100,"r":50,"pad":3},"autosize":true,"title":"<b>Väestörakenteen ennakkotiedot<\/b>","legend":{"orientation":"h","x":0,"y":-0.1},"paper_bgcolor":"rgba(0,0,0,0)","plot_bgcolor":"rgba(0,0,0,0)","showlegend":true,"xaxis":{"domain":[0,1],"automargin":true,"title":"<b>Kuukausi<\/b>","type":"category","categoryorder":"array","categoryarray":["2022M01*","2022M02*","2022M03*","2022M04*","2022M05*","2022M06*","2022M07*","2022M08*","2022M09*","2022M10*"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"<b>Lkm<\/b>","tickformat":"d"},"hovermode":"closest"},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false},"data":[{"x":["2022M01*","2022M02*","2022M03*","2022M04*","2022M05*","2022M06*","2022M07*","2022M08*","2022M09*","2022M10*"],"y":[32670,32705,32737,32765,32810,32835,32878,32874,32846,32866],"mode":"lines+markers","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="ennakkotiedot-naapurikunnat" class="slide level2" data-number="1.6">
<h2><span class="header-section-number">1.6</span> Ennakkotiedot naapurikunnat</h2>
<!--- Tilastokeskus --->
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-09c57a47f8731847b557" style="width:960px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-09c57a47f8731847b557">{"x":{"visdat":{"2904493572":["function () ","plotlyVisDat"]},"cur_data":"2904493572","attrs":{"2904493572":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"2904493572.1":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(252,179,22)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(252,179,22)","width":2}},"name":"Lempäälä","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"2904493572.2":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(230,73,37)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(230,73,37)","width":2}},"name":"Nokia","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"2904493572.3":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(40,51,108)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(40,51,108)","width":2}},"name":"Pirkkala","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"2904493572.4":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(0,173,197)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(0,173,197)","width":2}},"name":"Ylöjärvi","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":50,"l":50,"t":100,"r":50,"pad":3},"autosize":true,"title":"<b>Väestörakenteen ennakkotiedot<\/b>","legend":{"orientation":"h","x":0,"y":-0.3},"paper_bgcolor":"rgba(0,0,0,0)","plot_bgcolor":"rgba(0,0,0,0)","xaxis":{"domain":[0,1],"automargin":true,"title":"<b>Kuukausi<\/b>","type":"category","categoryorder":"array","categoryarray":["2022M01*","2022M02*","2022M03*","2022M04*","2022M05*","2022M06*","2022M07*","2022M08*","2022M09*","2022M10*"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"<b>Lkm<\/b>","tickformat":"d"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false},"data":[{"x":["2022M01*","2022M02*","2022M03*","2022M04*","2022M05*","2022M06*","2022M07*","2022M08*","2022M09*","2022M10*"],"y":[32670,32705,32737,32765,32810,32835,32878,32874,32846,32866],"mode":"lines+markers","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2022M01*","2022M02*","2022M03*","2022M04*","2022M05*","2022M06*","2022M07*","2022M08*","2022M09*","2022M10*"],"y":[24185,24220,24279,24274,24351,24454,24481,24427,24472,24531],"mode":"lines+markers","line":{"color":"rgb(252,179,22)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(252,179,22)","width":2}},"name":"Lempäälä","type":"scatter","error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2022M01*","2022M02*","2022M03*","2022M04*","2022M05*","2022M06*","2022M07*","2022M08*","2022M09*","2022M10*"],"y":[34917,34952,34985,35034,35101,35179,35220,35234,35276,35278],"mode":"lines+markers","line":{"color":"rgb(230,73,37)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(230,73,37)","width":2}},"name":"Nokia","type":"scatter","error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2022M01*","2022M02*","2022M03*","2022M04*","2022M05*","2022M06*","2022M07*","2022M08*","2022M09*","2022M10*"],"y":[20217,20210,20246,20300,20317,20284,20323,20296,20328,20355],"mode":"lines+markers","line":{"color":"rgb(40,51,108)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(40,51,108)","width":2}},"name":"Pirkkala","type":"scatter","error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2022M01*","2022M02*","2022M03*","2022M04*","2022M05*","2022M06*","2022M07*","2022M08*","2022M09*","2022M10*"],"y":[33588,33641,33683,33658,33741,33732,33714,33649,33624,33596],"mode":"lines+markers","line":{"color":"rgb(0,173,197)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(0,173,197)","width":2}},"name":"Ylöjärvi","type":"scatter","error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section></section>
<section>
<section id="ikäryhmät" class="title-slide slide level1 center" data-number="2">
<h1><span class="header-section-number">2</span> Ikäryhmät</h1>

</section>
<section id="väestöpyramidi" class="slide level2" data-number="2.1">
<h2><span class="header-section-number">2.1</span> Väestöpyramidi</h2>
<!--- Github --->
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-c922cd31d94723c19362" style="width:960px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-c922cd31d94723c19362">{"x":{"visdat":{"29042ed91119":["function () ","plotlyVisDat"]},"cur_data":"29042ed91119","attrs":{"29042ed91119":{"x":{},"y":{},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","orientation":"h","hoverinfo":"text","hovertext":{},"colors":["#28336C","#DE232F"],"inherit":true}},"layout":{"margin":{"b":100,"l":100,"t":100,"r":100,"pad":4},"autosize":true,"bargap":0.1,"barmode":"overlay","xaxis":{"domain":[0,1],"automargin":true,"tickmode":"array","tickvals":[-400,-200,-50,0,50,200,400],"ticktext":["400","200","50","0","50","200","400"],"title":"<b>Lkm<\/b>"},"yaxis":{"domain":[0,1],"automargin":true,"title":"<b>Ikä<\/b>","tickformat":"d"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[-185,-144,-172,-161,-170,-215,-218,-217,-216,-220,-196,-220,-237,-216,-239,-234,-226,-221,-197,-218,-158,-129,-107,-112,-111,-142,-136,-156,-148,-177,-177,-193,-227,-195,-185,-198,-201,-210,-240,-213,-223,-237,-205,-219,-257,-238,-240,-237,-193,-224,-223,-247,-215,-219,-219,-212,-213,-215,-255,-205,-209,-198,-205,-170,-200,-177,-159,-188,-179,-224,-172,-167,-162,-184,-181,-157,-142,-119,-95,-88,-122,-73,-81,-89,-69,-60,-38,-30,-27,-26,-25,-15,-13,-17,-3,-3,-3,-1,-1,-1,-1],"y":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],"type":"bar","orientation":"h","hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"hovertext":["Ikä: 0<br>Määrä: 185","Ikä: 1<br>Määrä: 144","Ikä: 2<br>Määrä: 172","Ikä: 3<br>Määrä: 161","Ikä: 4<br>Määrä: 170","Ikä: 5<br>Määrä: 215","Ikä: 6<br>Määrä: 218","Ikä: 7<br>Määrä: 217","Ikä: 8<br>Määrä: 216","Ikä: 9<br>Määrä: 220","Ikä: 10<br>Määrä: 196","Ikä: 11<br>Määrä: 220","Ikä: 12<br>Määrä: 237","Ikä: 13<br>Määrä: 216","Ikä: 14<br>Määrä: 239","Ikä: 15<br>Määrä: 234","Ikä: 16<br>Määrä: 226","Ikä: 17<br>Määrä: 221","Ikä: 18<br>Määrä: 197","Ikä: 19<br>Määrä: 218","Ikä: 20<br>Määrä: 158","Ikä: 21<br>Määrä: 129","Ikä: 22<br>Määrä: 107","Ikä: 23<br>Määrä: 112","Ikä: 24<br>Määrä: 111","Ikä: 25<br>Määrä: 142","Ikä: 26<br>Määrä: 136","Ikä: 27<br>Määrä: 156","Ikä: 28<br>Määrä: 148","Ikä: 29<br>Määrä: 177","Ikä: 30<br>Määrä: 177","Ikä: 31<br>Määrä: 193","Ikä: 32<br>Määrä: 227","Ikä: 33<br>Määrä: 195","Ikä: 34<br>Määrä: 185","Ikä: 35<br>Määrä: 198","Ikä: 36<br>Määrä: 201","Ikä: 37<br>Määrä: 210","Ikä: 38<br>Määrä: 240","Ikä: 39<br>Määrä: 213","Ikä: 40<br>Määrä: 223","Ikä: 41<br>Määrä: 237","Ikä: 42<br>Määrä: 205","Ikä: 43<br>Määrä: 219","Ikä: 44<br>Määrä: 257","Ikä: 45<br>Määrä: 238","Ikä: 46<br>Määrä: 240","Ikä: 47<br>Määrä: 237","Ikä: 48<br>Määrä: 193","Ikä: 49<br>Määrä: 224","Ikä: 50<br>Määrä: 223","Ikä: 51<br>Määrä: 247","Ikä: 52<br>Määrä: 215","Ikä: 53<br>Määrä: 219","Ikä: 54<br>Määrä: 219","Ikä: 55<br>Määrä: 212","Ikä: 56<br>Määrä: 213","Ikä: 57<br>Määrä: 215","Ikä: 58<br>Määrä: 255","Ikä: 59<br>Määrä: 205","Ikä: 60<br>Määrä: 209","Ikä: 61<br>Määrä: 198","Ikä: 62<br>Määrä: 205","Ikä: 63<br>Määrä: 170","Ikä: 64<br>Määrä: 200","Ikä: 65<br>Määrä: 177","Ikä: 66<br>Määrä: 159","Ikä: 67<br>Määrä: 188","Ikä: 68<br>Määrä: 179","Ikä: 69<br>Määrä: 224","Ikä: 70<br>Määrä: 172","Ikä: 71<br>Määrä: 167","Ikä: 72<br>Määrä: 162","Ikä: 73<br>Määrä: 184","Ikä: 74<br>Määrä: 181","Ikä: 75<br>Määrä: 157","Ikä: 76<br>Määrä: 142","Ikä: 77<br>Määrä: 119","Ikä: 78<br>Määrä: 95","Ikä: 79<br>Määrä: 88","Ikä: 80<br>Määrä: 122","Ikä: 81<br>Määrä: 73","Ikä: 82<br>Määrä: 81","Ikä: 83<br>Määrä: 89","Ikä: 84<br>Määrä: 69","Ikä: 85<br>Määrä: 60","Ikä: 86<br>Määrä: 38","Ikä: 87<br>Määrä: 30","Ikä: 88<br>Määrä: 27","Ikä: 89<br>Määrä: 26","Ikä: 90<br>Määrä: 25","Ikä: 91<br>Määrä: 15","Ikä: 92<br>Määrä: 13","Ikä: 93<br>Määrä: 17","Ikä: 94<br>Määrä: 3","Ikä: 95<br>Määrä: 3","Ikä: 96<br>Määrä: 3","Ikä: 97<br>Määrä: 1","Ikä: 98<br>Määrä: 1","Ikä: 99<br>Määrä: 1","Ikä: 100<br>Määrä: 1"],"name":"Miehet","marker":{"color":"rgba(40,51,108,1)","line":{"color":"rgba(40,51,108,1)"}},"textfont":{"color":"rgba(40,51,108,1)"},"error_y":{"color":"rgba(40,51,108,1)"},"error_x":{"color":"rgba(40,51,108,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[162,155,171,156,186,228,198,190,206,227,227,230,236,225,231,211,207,220,187,148,121,105,87,90,122,122,122,173,158,185,168,192,219,208,194,192,192,217,229,249,245,208,231,220,231,257,252,225,206,225,202,204,224,220,231,205,196,233,217,189,203,186,203,202,193,195,180,209,208,185,192,188,200,219,188,204,172,128,153,122,126,98,116,105,79,92,58,51,59,57,32,37,26,18,23,13,12,7,4,3,2],"y":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],"type":"bar","orientation":"h","hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"hovertext":["Ikä: 0<br>Määrä: 162","Ikä: 1<br>Määrä: 155","Ikä: 2<br>Määrä: 171","Ikä: 3<br>Määrä: 156","Ikä: 4<br>Määrä: 186","Ikä: 5<br>Määrä: 228","Ikä: 6<br>Määrä: 198","Ikä: 7<br>Määrä: 190","Ikä: 8<br>Määrä: 206","Ikä: 9<br>Määrä: 227","Ikä: 10<br>Määrä: 227","Ikä: 11<br>Määrä: 230","Ikä: 12<br>Määrä: 236","Ikä: 13<br>Määrä: 225","Ikä: 14<br>Määrä: 231","Ikä: 15<br>Määrä: 211","Ikä: 16<br>Määrä: 207","Ikä: 17<br>Määrä: 220","Ikä: 18<br>Määrä: 187","Ikä: 19<br>Määrä: 148","Ikä: 20<br>Määrä: 121","Ikä: 21<br>Määrä: 105","Ikä: 22<br>Määrä: 87","Ikä: 23<br>Määrä: 90","Ikä: 24<br>Määrä: 122","Ikä: 25<br>Määrä: 122","Ikä: 26<br>Määrä: 122","Ikä: 27<br>Määrä: 173","Ikä: 28<br>Määrä: 158","Ikä: 29<br>Määrä: 185","Ikä: 30<br>Määrä: 168","Ikä: 31<br>Määrä: 192","Ikä: 32<br>Määrä: 219","Ikä: 33<br>Määrä: 208","Ikä: 34<br>Määrä: 194","Ikä: 35<br>Määrä: 192","Ikä: 36<br>Määrä: 192","Ikä: 37<br>Määrä: 217","Ikä: 38<br>Määrä: 229","Ikä: 39<br>Määrä: 249","Ikä: 40<br>Määrä: 245","Ikä: 41<br>Määrä: 208","Ikä: 42<br>Määrä: 231","Ikä: 43<br>Määrä: 220","Ikä: 44<br>Määrä: 231","Ikä: 45<br>Määrä: 257","Ikä: 46<br>Määrä: 252","Ikä: 47<br>Määrä: 225","Ikä: 48<br>Määrä: 206","Ikä: 49<br>Määrä: 225","Ikä: 50<br>Määrä: 202","Ikä: 51<br>Määrä: 204","Ikä: 52<br>Määrä: 224","Ikä: 53<br>Määrä: 220","Ikä: 54<br>Määrä: 231","Ikä: 55<br>Määrä: 205","Ikä: 56<br>Määrä: 196","Ikä: 57<br>Määrä: 233","Ikä: 58<br>Määrä: 217","Ikä: 59<br>Määrä: 189","Ikä: 60<br>Määrä: 203","Ikä: 61<br>Määrä: 186","Ikä: 62<br>Määrä: 203","Ikä: 63<br>Määrä: 202","Ikä: 64<br>Määrä: 193","Ikä: 65<br>Määrä: 195","Ikä: 66<br>Määrä: 180","Ikä: 67<br>Määrä: 209","Ikä: 68<br>Määrä: 208","Ikä: 69<br>Määrä: 185","Ikä: 70<br>Määrä: 192","Ikä: 71<br>Määrä: 188","Ikä: 72<br>Määrä: 200","Ikä: 73<br>Määrä: 219","Ikä: 74<br>Määrä: 188","Ikä: 75<br>Määrä: 204","Ikä: 76<br>Määrä: 172","Ikä: 77<br>Määrä: 128","Ikä: 78<br>Määrä: 153","Ikä: 79<br>Määrä: 122","Ikä: 80<br>Määrä: 126","Ikä: 81<br>Määrä: 98","Ikä: 82<br>Määrä: 116","Ikä: 83<br>Määrä: 105","Ikä: 84<br>Määrä: 79","Ikä: 85<br>Määrä: 92","Ikä: 86<br>Määrä: 58","Ikä: 87<br>Määrä: 51","Ikä: 88<br>Määrä: 59","Ikä: 89<br>Määrä: 57","Ikä: 90<br>Määrä: 32","Ikä: 91<br>Määrä: 37","Ikä: 92<br>Määrä: 26","Ikä: 93<br>Määrä: 18","Ikä: 94<br>Määrä: 23","Ikä: 95<br>Määrä: 13","Ikä: 96<br>Määrä: 12","Ikä: 97<br>Määrä: 7","Ikä: 98<br>Määrä: 4","Ikä: 99<br>Määrä: 3","Ikä: 100<br>Määrä: 2"],"name":"Naiset","marker":{"color":"rgba(222,35,47,1)","line":{"color":"rgba(222,35,47,1)"}},"textfont":{"color":"rgba(222,35,47,1)"},"error_y":{"color":"rgba(222,35,47,1)"},"error_x":{"color":"rgba(222,35,47,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="ikäryhmät-1" class="slide level2" data-number="2.2">
<h2><span class="header-section-number">2.2</span> Ikäryhmät</h2>
<!--- Tilastokeskus --->
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-ccd2767a891e3176f8bc" style="width:960px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ccd2767a891e3176f8bc">{"x":{"visdat":{"29047e937e80":["function () ","plotlyVisDat"]},"cur_data":"29047e937e80","attrs":{"29047e937e80":{"x":{},"y":{},"marker":{"color":"rgb(222,35,47)"},"name":"0-15 -vuotiaat","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"29047e937e80.1":{"x":{},"y":{},"marker":{"color":"rgb(252,179,22)"},"name":"16-64 -vuotiaat","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","inherit":true},"29047e937e80.2":{"x":{},"y":{},"marker":{"color":"rgb(230,73,37)"},"name":"65-79 -vuotiaat","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","inherit":true},"29047e937e80.3":{"x":{},"y":{},"marker":{"color":"rgb(40,51,108)"},"name":"80+ -vuotiaat","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","inherit":true}},"layout":{"margin":{"b":50,"l":50,"t":100,"r":50,"pad":3},"autosize":true,"title":"<b>Väestökehitys ikäryhmittäin<\/b>","barmode":"relative","legend":{"orientation":"h","x":0,"y":-0.3},"paper_bgcolor":"rgba(0,0,0,0)","plot_bgcolor":"rgba(0,0,0,0)","showlegend":true,"xaxis":{"domain":[0,1],"automargin":true,"title":"<b>Vuodet<\/b>","type":"category","categoryorder":"array","categoryarray":["1972","1973","1974","1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"<b>Lkm<\/b>","tickformat":"d","base":0},"hovermode":"closest"},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false},"data":[{"x":["1972","1973","1974","1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[4902,4954,5028,5044,5047,5082,5122,5141,5126,5159,5275,5353,5369,5318,5296,5298,5274,5385,5450,5526,5539,5618,5611,5655,5645,5605,5501,5434,5491,5559,5631,5727,5844,6028,6146,6240,6362,6453,6463,6496,6491,6557,6563,6562,6690,6675,6620,6583,6507,6499],"marker":{"color":"rgb(222,35,47)","line":{"color":"rgba(31,119,180,1)"}},"name":"0-15 -vuotiaat","type":"bar","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["1972","1973","1974","1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[12575,12886,13045,13279,13415,13623,13782,14018,14201,14373,14635,14971,15139,15183,15324,15478,15546,15764,16023,16111,16249,16379,16286,16194,16135,16224,16267,16437,16686,16841,17104,17304,17588,17950,18139,18340,18531,18566,18560,18502,18496,18404,18317,18309,18560,18639,18743,18745,18965,19270],"marker":{"color":"rgb(252,179,22)","line":{"color":"rgba(255,127,14,1)"}},"name":"16-64 -vuotiaat","type":"bar","error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["1972","1973","1974","1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[1722,1807,1879,1957,2014,2080,2134,2141,2159,2169,2159,2200,2188,2230,2236,2256,2248,2277,2297,2322,2349,2392,2437,2531,2530,2546,2565,2628,2661,2730,2798,2926,3036,3067,3195,3243,3334,3409,3506,3724,3938,4124,4326,4454,4570,4726,4824,4970,5110,5137],"marker":{"color":"rgb(230,73,37)","line":{"color":"rgba(44,160,44,1)"}},"name":"65-79 -vuotiaat","type":"bar","error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["1972","1973","1974","1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[262,267,269,284,302,320,343,368,391,421,458,451,472,494,516,557,588,628,637,675,689,716,722,726,736,744,800,786,792,792,808,821,835,882,927,986,1055,1094,1146,1169,1201,1260,1265,1282,1370,1397,1489,1570,1632,1716],"marker":{"color":"rgb(40,51,108)","line":{"color":"rgba(214,39,40,1)"}},"name":"80+ -vuotiaat","type":"bar","error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section></section>
<section>
<section id="syntyneet" class="title-slide slide level1 center" data-number="3">
<h1><span class="header-section-number">3</span> Syntyneet</h1>

</section>
<section id="kangasala-1" class="slide level2" data-number="3.1">
<h2><span class="header-section-number">3.1</span> Kangasala</h2>
<!--- Tilastokeskus --->
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-4ffa2074842244216d35" style="width:960px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-4ffa2074842244216d35">{"x":{"visdat":{"290456d1be6":["function () ","plotlyVisDat"]},"cur_data":"290456d1be6","attrs":{"290456d1be6":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":50,"l":50,"t":100,"r":50,"pad":3},"autosize":true,"title":"<b>Syntyneet<\/b>","legend":{"orientation":"h","x":0,"y":-0.3},"paper_bgcolor":"rgba(0,0,0,0)","plot_bgcolor":"rgba(0,0,0,0)","showlegend":true,"xaxis":{"domain":[0,1],"automargin":true,"title":"<b>Vuodet<\/b>","type":"category","categoryorder":"array","categoryarray":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"<b>Lkm<\/b>","tickformat":"d"},"hovermode":"closest"},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false},"data":[{"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[360,389,408,404,394,394,360,364,356,327,313,365,290,284,301,280,334],"mode":"lines+markers","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="naapurikunnat-1" class="slide level2" data-number="3.2">
<h2><span class="header-section-number">3.2</span> Naapurikunnat</h2>
<!--- Tilastokeskus --->
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-7dbfea5f6ce0f9f6cb7d" style="width:960px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-7dbfea5f6ce0f9f6cb7d">{"x":{"visdat":{"290446ba1bec":["function () ","plotlyVisDat"]},"cur_data":"290446ba1bec","attrs":{"290446ba1bec":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"290446ba1bec.1":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(252,179,22)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(252,179,22)","width":2}},"name":"Lempäälä","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"290446ba1bec.2":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(230,73,37)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(230,73,37)","width":2}},"name":"Nokia","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"290446ba1bec.3":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(40,51,108)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(40,51,108)","width":2}},"name":"Pirkkala","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"290446ba1bec.4":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(0,173,197)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(0,173,197)","width":2}},"name":"Ylöjärvi","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":50,"l":50,"t":100,"r":50,"pad":3},"autosize":true,"title":"<b>Syntyneet<\/b>","legend":{"orientation":"h","x":0,"y":-0.3},"paper_bgcolor":"rgba(0,0,0,0)","plot_bgcolor":"rgba(0,0,0,0)","xaxis":{"domain":[0,1],"automargin":true,"title":"<b>Vuodet<\/b>","type":"category","categoryorder":"array","categoryarray":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"<b>Lkm<\/b>","tickformat":"d"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false},"data":[{"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[360,389,408,404,394,394,360,364,356,327,313,365,290,284,301,280,334],"mode":"lines+markers","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[274,287,288,315,313,321,312,305,316,304,285,261,258,228,237,245,275],"mode":"lines+markers","line":{"color":"rgb(252,179,22)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(252,179,22)","width":2}},"name":"Lempäälä","type":"scatter","error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[373,380,434,454,446,407,404,407,399,360,363,303,290,268,294,284,329],"mode":"lines+markers","line":{"color":"rgb(230,73,37)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(230,73,37)","width":2}},"name":"Nokia","type":"scatter","error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[222,219,216,218,229,251,290,260,269,243,231,226,205,185,182,175,220],"mode":"lines+markers","line":{"color":"rgb(40,51,108)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(40,51,108)","width":2}},"name":"Pirkkala","type":"scatter","error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[342,412,403,445,479,395,452,508,419,396,436,373,350,328,340,301,369],"mode":"lines+markers","line":{"color":"rgb(0,173,197)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(0,173,197)","width":2}},"name":"Ylöjärvi","type":"scatter","error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section></section>
<section>
<section id="muuttoliike" class="title-slide slide level1 center" data-number="4">
<h1><span class="header-section-number">4</span> Muuttoliike</h1>

</section>
<section id="kangasalan-muuttoliike-kuntiin-2021" class="slide level2" data-number="4.1">
<h2><span class="header-section-number">4.1</span> Kangasalan muuttoliike kuntiin 2021</h2>
<!--- Github --->
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="0" data-source-offset="-0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -1;"><span id="cb1-0"><a href="#cb1-0"></a>d3 <span class="op">=</span> <span class="pp">require</span>(<span class="st">"d3@7"</span>)</span>
<span id="cb1-1"><a href="#cb1-1"></a></span>
<span id="cb1-2"><a href="#cb1-2"></a>data <span class="op">=</span> d3<span class="op">.</span><span class="fu">csv</span>(<span class="st">"https://gist.githubusercontent.com/Juuso1/4b92d153a02263380b2560f2e7e42d09/raw/muuttoliike_kangasala_2021.csv"</span><span class="op">,</span> d3<span class="op">.</span><span class="at">autoType</span>)</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a>data_2 <span class="op">=</span> d3<span class="op">.</span><span class="fu">csv</span>(<span class="st">"https://gist.githubusercontent.com/Juuso1/f2fcdaf8c6053f315f1bc1a67bbd4c61/raw/kangasala_tampere_pienalue_2021.csv"</span><span class="op">,</span> d3<span class="op">.</span><span class="at">autoType</span>)</span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a>data_3 <span class="op">=</span> d3<span class="op">.</span><span class="fu">csv</span>(<span class="st">"https://gist.githubusercontent.com/Juuso1/722dc5a035c757f2032125fbea751142/raw/kangasala_lempaala_pienalue_2021.csv"</span><span class="op">,</span> d3<span class="op">.</span><span class="at">autoType</span>)</span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a>data_4 <span class="op">=</span> d3<span class="op">.</span><span class="fu">csv</span>(<span class="st">"https://gist.githubusercontent.com/Juuso1/145ce37f1f10433c6cbc4831f244602e/raw/kangasala_nokia_pienalue_2021.csv"</span><span class="op">,</span> d3<span class="op">.</span><span class="at">autoType</span>)</span>
<span id="cb1-9"><a href="#cb1-9"></a></span>
<span id="cb1-10"><a href="#cb1-10"></a>data_5 <span class="op">=</span> d3<span class="op">.</span><span class="fu">csv</span>(<span class="st">"https://gist.githubusercontent.com/Juuso1/7951de54348c5de46db9e4bf3173afe6/raw/kangasala_orivesi_pienalue.csv"</span><span class="op">,</span> d3<span class="op">.</span><span class="at">autoType</span>)</span>
<span id="cb1-11"><a href="#cb1-11"></a></span>
<span id="cb1-12"><a href="#cb1-12"></a>data_6 <span class="op">=</span> d3<span class="op">.</span><span class="fu">csv</span>(<span class="st">"https://gist.githubusercontent.com/Juuso1/e66c94b930972e105c450045aea8c7b2/raw/kangasala_pirkkala_pienalue_2021.csv"</span><span class="op">,</span> d3<span class="op">.</span><span class="at">autoType</span>)</span>
<span id="cb1-13"><a href="#cb1-13"></a></span>
<span id="cb1-14"><a href="#cb1-14"></a>data_7 <span class="op">=</span> d3<span class="op">.</span><span class="fu">csv</span>(<span class="st">"https://gist.githubusercontent.com/Juuso1/5690853d57d677826555a37f759c1c95/raw/kangasala_palkane_pienalue_2021.csv"</span><span class="op">,</span> d3<span class="op">.</span><span class="at">autoType</span>)</span>
<span id="cb1-15"><a href="#cb1-15"></a></span>
<span id="cb1-16"><a href="#cb1-16"></a>data_8 <span class="op">=</span> d3<span class="op">.</span><span class="fu">csv</span>(<span class="st">"https://gist.githubusercontent.com/Juuso1/dcb98508964bc6c255280637be4135cc/raw/kangasala_akaa_pienalue.csv"</span><span class="op">,</span> d3<span class="op">.</span><span class="at">autoType</span>)</span>
<span id="cb1-17"><a href="#cb1-17"></a></span>
<span id="cb1-18"><a href="#cb1-18"></a>data_9 <span class="op">=</span> d3<span class="op">.</span><span class="fu">csv</span>(<span class="st">"https://gist.githubusercontent.com/Juuso1/22b5fe1ec9e3a8bf353c7b17a301d4a9/raw/kangasala_valkeakoski-pienalueet.csv"</span><span class="op">,</span> d3<span class="op">.</span><span class="at">autoType</span>)</span>
<span id="cb1-19"><a href="#cb1-19"></a></span>
<span id="cb1-20"><a href="#cb1-20"></a>data_10 <span class="op">=</span> d3<span class="op">.</span><span class="fu">csv</span>(<span class="st">"https://gist.githubusercontent.com/Juuso1/47bebabe370259a9a5ae2709460fac9b/raw/kangasala_ylojarvi_pienalueet.csv"</span><span class="op">,</span> d3<span class="op">.</span><span class="at">autoType</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-11" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb2--1"><a href="#cb2--1"></a>height <span class="op">=</span> width</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb3--1"><a href="#cb3--1"></a>width <span class="op">=</span> <span class="dv">300</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb4--1"><a href="#cb4--1"></a>innerRadius <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(width<span class="op">,</span> height) <span class="op">*</span> <span class="op">.</span><span class="dv">3</span> <span class="op">-</span> <span class="dv">40</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb5--1"><a href="#cb5--1"></a>outerRadius <span class="op">=</span> innerRadius <span class="op">+</span> <span class="dv">20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb6--1"><a href="#cb6--1"></a>color <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleOrdinal</span>(names<span class="op">,</span> d3<span class="op">.</span><span class="at">schemeCategory10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb7" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb7--1"><a href="#cb7--1"></a>ribbon <span class="op">=</span> d3<span class="op">.</span><span class="fu">ribbon</span>()</span>
<span id="cb7-0"><a href="#cb7-0"></a>    <span class="op">.</span><span class="fu">radius</span>(innerRadius <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb7-1"><a href="#cb7-1"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="fl">0.8</span><span class="op">/</span> innerRadius)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb8" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb8--1"><a href="#cb8--1"></a>arc <span class="op">=</span> d3<span class="op">.</span><span class="fu">arc</span>()</span>
<span id="cb8-0"><a href="#cb8-0"></a>    <span class="op">.</span><span class="fu">innerRadius</span>(innerRadius)</span>
<span id="cb8-1"><a href="#cb8-1"></a>    <span class="op">.</span><span class="fu">outerRadius</span>(outerRadius)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb9" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb9--1"><a href="#cb9--1"></a>chord <span class="op">=</span> d3<span class="op">.</span><span class="fu">chordDirected</span>()</span>
<span id="cb9-0"><a href="#cb9-0"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="fl">0.8</span> <span class="op">/</span> innerRadius)</span>
<span id="cb9-1"><a href="#cb9-1"></a>    <span class="op">.</span><span class="fu">sortSubgroups</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a>    <span class="op">.</span><span class="fu">sortChords</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb10" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb10--1"><a href="#cb10--1"></a>matrix <span class="op">=</span> {</span>
<span id="cb10-0"><a href="#cb10-0"></a>  <span class="kw">const</span> index <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>(names<span class="op">.</span><span class="fu">map</span>((name<span class="op">,</span> i) <span class="kw">=&gt;</span> [name<span class="op">,</span> i]))<span class="op">;</span></span>
<span id="cb10-1"><a href="#cb10-1"></a>  <span class="kw">const</span> matrix <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(index<span class="op">,</span> () <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Array</span>(names<span class="op">.</span><span class="at">length</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>))<span class="op">;</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="cf">for</span> (<span class="kw">const</span> {source<span class="op">,</span> target<span class="op">,</span> value} <span class="kw">of</span> data) matrix[index<span class="op">.</span><span class="fu">get</span>(source)][index<span class="op">.</span><span class="fu">get</span>(target)] <span class="op">+=</span> value<span class="op">;</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="cf">return</span> matrix<span class="op">;</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb11" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb11--1"><a href="#cb11--1"></a>names <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(<span class="kw">new</span> <span class="bu">Set</span>(data<span class="op">.</span><span class="fu">flatMap</span>(d <span class="kw">=&gt;</span> [d<span class="op">.</span><span class="at">source</span><span class="op">,</span> d<span class="op">.</span><span class="at">target</span>])))<span class="op">.</span><span class="fu">sort</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb12" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb12--1"><a href="#cb12--1"></a>rename <span class="op">=</span> name <span class="kw">=&gt;</span> name<span class="op">.</span><span class="fu">substring</span>(name<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">"."</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> name<span class="op">.</span><span class="fu">lastIndexOf</span>(<span class="st">"."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-12" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb13" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb13--1"><a href="#cb13--1"></a>chart <span class="op">=</span> {</span>
<span id="cb13-0"><a href="#cb13-0"></a></span>
<span id="cb13-1"><a href="#cb13-1"></a>  <span class="kw">let</span> sum_target<span class="op">;</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="kw">let</span> sum_source<span class="op">;</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="kw">let</span> sum_yht<span class="op">;</span></span>
<span id="cb13-4"><a href="#cb13-4"></a></span>
<span id="cb13-5"><a href="#cb13-5"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb13-6"><a href="#cb13-6"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="op">-</span>width <span class="op">/</span> <span class="dv">2</span><span class="op">,</span> <span class="op">-</span>height <span class="op">/</span> <span class="dv">3</span><span class="op">,</span> width<span class="op">,</span> height])<span class="op">;</span></span>
<span id="cb13-7"><a href="#cb13-7"></a></span>
<span id="cb13-8"><a href="#cb13-8"></a>  <span class="kw">const</span> chords <span class="op">=</span> <span class="fu">chord</span>(matrix)<span class="op">;</span></span>
<span id="cb13-9"><a href="#cb13-9"></a></span>
<span id="cb13-10"><a href="#cb13-10"></a>  <span class="kw">const</span> group <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb13-11"><a href="#cb13-11"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb13-12"><a href="#cb13-12"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-family"</span><span class="op">,</span> <span class="st">"Century Gothic"</span>)</span>
<span id="cb13-13"><a href="#cb13-13"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)</span>
<span id="cb13-14"><a href="#cb13-14"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g"</span>)</span>
<span id="cb13-15"><a href="#cb13-15"></a>    <span class="op">.</span><span class="fu">data</span>(chords<span class="op">.</span><span class="at">groups</span>)</span>
<span id="cb13-16"><a href="#cb13-16"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb13-17"><a href="#cb13-17"></a></span>
<span id="cb13-18"><a href="#cb13-18"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb13-19"><a href="#cb13-19"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb13-20"><a href="#cb13-20"></a></span>
<span id="cb13-21"><a href="#cb13-21"></a>           sum_target <span class="op">=</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">;</span></span>
<span id="cb13-22"><a href="#cb13-22"></a>           sum_source <span class="op">=</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="op">;</span></span>
<span id="cb13-23"><a href="#cb13-23"></a>           sum_yht <span class="op">=</span> sum_target<span class="op">-</span>sum_source<span class="op">;</span></span>
<span id="cb13-24"><a href="#cb13-24"></a>            <span class="cf">if</span> (sum_yht <span class="op">&gt;</span> <span class="dv">0</span>) { <span class="cf">return</span> <span class="st">"#009651"</span> }</span>
<span id="cb13-25"><a href="#cb13-25"></a>            <span class="cf">else</span> <span class="cf">if</span> (sum_yht <span class="op">==</span> <span class="dv">0</span>) { <span class="cf">return</span> <span class="st">"#28336C"</span> }</span>
<span id="cb13-26"><a href="#cb13-26"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb13-27"><a href="#cb13-27"></a>        })</span>
<span id="cb13-28"><a href="#cb13-28"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> arc)<span class="op">;</span></span>
<span id="cb13-29"><a href="#cb13-29"></a>  </span>
<span id="cb13-30"><a href="#cb13-30"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb13-31"><a href="#cb13-31"></a>      <span class="op">.</span><span class="fu">each</span>(d <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">angle</span> <span class="op">=</span> (d<span class="op">.</span><span class="at">startAngle</span> <span class="op">+</span> d<span class="op">.</span><span class="at">endAngle</span>) <span class="op">/</span> <span class="dv">2</span>))</span>
<span id="cb13-32"><a href="#cb13-32"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dy"</span><span class="op">,</span> <span class="st">"0.35em"</span>)</span>
<span id="cb13-33"><a href="#cb13-33"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`</span></span>
<span id="cb13-34"><a href="#cb13-34"></a><span class="vs">        rotate(</span><span class="sc">${</span>(d<span class="op">.</span><span class="at">angle</span> <span class="op">*</span> <span class="dv">180</span> <span class="op">/</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">-</span> <span class="dv">90</span>)<span class="sc">}</span><span class="vs">)</span></span>
<span id="cb13-35"><a href="#cb13-35"></a><span class="vs">        translate(</span><span class="sc">${</span>outerRadius <span class="op">+</span> <span class="dv">5</span><span class="sc">}</span><span class="vs">)</span></span>
<span id="cb13-36"><a href="#cb13-36"></a><span class="vs">        </span><span class="sc">${</span>d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"rotate(180)"</span> <span class="op">:</span> <span class="st">""</span><span class="sc">}</span></span>
<span id="cb13-37"><a href="#cb13-37"></a><span class="vs">      `</span>)</span>
<span id="cb13-38"><a href="#cb13-38"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"end"</span> <span class="op">:</span> <span class="kw">null</span>)</span>
<span id="cb13-39"><a href="#cb13-39"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> names[d<span class="op">.</span><span class="at">index</span>])</span>
<span id="cb13-40"><a href="#cb13-40"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb13-41"><a href="#cb13-41"></a></span>
<span id="cb13-42"><a href="#cb13-42"></a>           sum_target <span class="op">=</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">;</span></span>
<span id="cb13-43"><a href="#cb13-43"></a>           sum_source <span class="op">=</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="op">;</span></span>
<span id="cb13-44"><a href="#cb13-44"></a>           sum_yht <span class="op">=</span> sum_target<span class="op">-</span>sum_source<span class="op">;</span></span>
<span id="cb13-45"><a href="#cb13-45"></a>            <span class="cf">if</span> (sum_yht <span class="op">&gt;</span> <span class="dv">0</span>) { <span class="cf">return</span> <span class="st">"#009651"</span> }</span>
<span id="cb13-46"><a href="#cb13-46"></a>            <span class="cf">else</span> <span class="cf">if</span> (sum_yht <span class="op">==</span> <span class="dv">0</span>) { <span class="cf">return</span> <span class="st">"#28336C"</span> }</span>
<span id="cb13-47"><a href="#cb13-47"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb13-48"><a href="#cb13-48"></a>        })<span class="op">;</span></span>
<span id="cb13-49"><a href="#cb13-49"></a></span>
<span id="cb13-50"><a href="#cb13-50"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb13-51"><a href="#cb13-51"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names[d<span class="op">.</span><span class="at">index</span>]<span class="sc">}</span></span>
<span id="cb13-52"><a href="#cb13-52"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> lähtee →</span></span>
<span id="cb13-53"><a href="#cb13-53"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> tulee ←</span></span>
<span id="cb13-54"><a href="#cb13-54"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> netto =`</span>)<span class="op">;</span>  </span>
<span id="cb13-55"><a href="#cb13-55"></a></span>
<span id="cb13-56"><a href="#cb13-56"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb13-57"><a href="#cb13-57"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill-opacity"</span><span class="op">,</span> <span class="fl">0.75</span>)</span>
<span id="cb13-58"><a href="#cb13-58"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb13-59"><a href="#cb13-59"></a>    <span class="op">.</span><span class="fu">data</span>(chords)</span>
<span id="cb13-60"><a href="#cb13-60"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"path"</span>)</span>
<span id="cb13-61"><a href="#cb13-61"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"mix-blend-mode"</span><span class="op">,</span> <span class="st">"multiply"</span>)</span>
<span id="cb13-62"><a href="#cb13-62"></a>      <span class="co">//.attr("fill", d =&gt; color(names[d.source.index]))</span></span>
<span id="cb13-63"><a href="#cb13-63"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb13-64"><a href="#cb13-64"></a>            <span class="co">//if (names[d.index] === "Kangasala") {return "#DE232F"}</span></span>
<span id="cb13-65"><a href="#cb13-65"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#28336C"</span>}</span>
<span id="cb13-66"><a href="#cb13-66"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#28336C"</span> }</span>
<span id="cb13-67"><a href="#cb13-67"></a>        <span class="op">;</span>})</span>
<span id="cb13-68"><a href="#cb13-68"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> ribbon)</span>
<span id="cb13-69"><a href="#cb13-69"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb13-70"><a href="#cb13-70"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names[d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> --&gt; </span><span class="sc">${</span>names[d<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb13-71"><a href="#cb13-71"></a></span>
<span id="cb13-72"><a href="#cb13-72"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb13-73"><a href="#cb13-73"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-13" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="kangasalan-ja-tampereen-pienalueiden-muuttoliike-2021" class="slide level2" data-number="4.2">
<h2><span class="header-section-number">4.2</span> Kangasalan ja Tampereen pienalueiden muuttoliike 2021</h2>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb14" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb14--1"><a href="#cb14--1"></a>ribbon_2 <span class="op">=</span> d3<span class="op">.</span><span class="fu">ribbon</span>()</span>
<span id="cb14-0"><a href="#cb14-0"></a>    <span class="op">.</span><span class="fu">radius</span>(innerRadius <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb14-1"><a href="#cb14-1"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="fl">0.4</span><span class="op">/</span> innerRadius)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-14" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb15" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb15--1"><a href="#cb15--1"></a>chord_2 <span class="op">=</span> d3<span class="op">.</span><span class="fu">chordDirected</span>()</span>
<span id="cb15-0"><a href="#cb15-0"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="dv">1</span> <span class="op">/</span> innerRadius)</span>
<span id="cb15-1"><a href="#cb15-1"></a>    <span class="op">.</span><span class="fu">sortSubgroups</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span>
<span id="cb15-2"><a href="#cb15-2"></a>    <span class="op">.</span><span class="fu">sortChords</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-15" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb16" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb16--1"><a href="#cb16--1"></a>matrix_2 <span class="op">=</span> {</span>
<span id="cb16-0"><a href="#cb16-0"></a>  <span class="kw">const</span> index <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>(names_2<span class="op">.</span><span class="fu">map</span>((name<span class="op">,</span> i) <span class="kw">=&gt;</span> [name<span class="op">,</span> i]))<span class="op">;</span></span>
<span id="cb16-1"><a href="#cb16-1"></a>  <span class="kw">const</span> matrix_2 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(index<span class="op">,</span> () <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Array</span>(names_2<span class="op">.</span><span class="at">length</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>))<span class="op">;</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="cf">for</span> (<span class="kw">const</span> {source<span class="op">,</span> target<span class="op">,</span> value} <span class="kw">of</span> data_2) matrix_2[index<span class="op">.</span><span class="fu">get</span>(source)][index<span class="op">.</span><span class="fu">get</span>(target)] <span class="op">+=</span> value<span class="op">;</span></span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="cf">return</span> matrix_2<span class="op">;</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-16" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb17" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb17--1"><a href="#cb17--1"></a>names_2 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(<span class="kw">new</span> <span class="bu">Set</span>(data_2<span class="op">.</span><span class="fu">flatMap</span>(d <span class="kw">=&gt;</span> [d<span class="op">.</span><span class="at">source</span><span class="op">,</span> d<span class="op">.</span><span class="at">target</span>])))<span class="op">.</span><span class="fu">sort</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-17" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb18" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb18--1"><a href="#cb18--1"></a>rename_2 <span class="op">=</span> name <span class="kw">=&gt;</span> name<span class="op">.</span><span class="fu">substring</span>(name<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">"."</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> name<span class="op">.</span><span class="fu">lastIndexOf</span>(<span class="st">"."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-18" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb19" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb19--1"><a href="#cb19--1"></a>chart_2 <span class="op">=</span> {</span>
<span id="cb19-0"><a href="#cb19-0"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb19-1"><a href="#cb19-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="op">-</span>width <span class="op">/</span> <span class="dv">2</span><span class="op">,</span> <span class="op">-</span>height <span class="op">/</span> <span class="dv">3</span><span class="op">,</span> width<span class="op">,</span> height])<span class="op">;</span></span>
<span id="cb19-2"><a href="#cb19-2"></a></span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="kw">const</span> chords <span class="op">=</span> <span class="fu">chord_2</span>(matrix_2)<span class="op">;</span></span>
<span id="cb19-4"><a href="#cb19-4"></a></span>
<span id="cb19-5"><a href="#cb19-5"></a>  <span class="kw">const</span> group <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb19-6"><a href="#cb19-6"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb19-7"><a href="#cb19-7"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-family"</span><span class="op">,</span> <span class="st">"Century Gothic"</span>)</span>
<span id="cb19-8"><a href="#cb19-8"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)</span>
<span id="cb19-9"><a href="#cb19-9"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g"</span>)</span>
<span id="cb19-10"><a href="#cb19-10"></a>    <span class="op">.</span><span class="fu">data</span>(chords<span class="op">.</span><span class="at">groups</span>)</span>
<span id="cb19-11"><a href="#cb19-11"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb19-12"><a href="#cb19-12"></a></span>
<span id="cb19-13"><a href="#cb19-13"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb19-14"><a href="#cb19-14"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb19-15"><a href="#cb19-15"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb19-16"><a href="#cb19-16"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb19-17"><a href="#cb19-17"></a>        <span class="op">;</span>})</span>
<span id="cb19-18"><a href="#cb19-18"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> arc)<span class="op">;</span></span>
<span id="cb19-19"><a href="#cb19-19"></a>  </span>
<span id="cb19-20"><a href="#cb19-20"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb19-21"><a href="#cb19-21"></a>      <span class="op">.</span><span class="fu">each</span>(d <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">angle</span> <span class="op">=</span> (d<span class="op">.</span><span class="at">startAngle</span> <span class="op">+</span> d<span class="op">.</span><span class="at">endAngle</span>) <span class="op">/</span> <span class="dv">2</span>))</span>
<span id="cb19-22"><a href="#cb19-22"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dy"</span><span class="op">,</span> <span class="st">"0.35em"</span>)</span>
<span id="cb19-23"><a href="#cb19-23"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`</span></span>
<span id="cb19-24"><a href="#cb19-24"></a><span class="vs">        rotate(</span><span class="sc">${</span>(d<span class="op">.</span><span class="at">angle</span> <span class="op">*</span> <span class="dv">180</span> <span class="op">/</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">-</span> <span class="dv">90</span>)<span class="sc">}</span><span class="vs">)</span></span>
<span id="cb19-25"><a href="#cb19-25"></a><span class="vs">        translate(</span><span class="sc">${</span>outerRadius <span class="op">+</span> <span class="dv">5</span><span class="sc">}</span><span class="vs">)</span></span>
<span id="cb19-26"><a href="#cb19-26"></a><span class="vs">        </span><span class="sc">${</span>d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"rotate(180)"</span> <span class="op">:</span> <span class="st">""</span><span class="sc">}</span></span>
<span id="cb19-27"><a href="#cb19-27"></a><span class="vs">      `</span>)</span>
<span id="cb19-28"><a href="#cb19-28"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"end"</span> <span class="op">:</span> <span class="kw">null</span>)</span>
<span id="cb19-29"><a href="#cb19-29"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> names_2[d<span class="op">.</span><span class="at">index</span>])</span>
<span id="cb19-30"><a href="#cb19-30"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb19-31"><a href="#cb19-31"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb19-32"><a href="#cb19-32"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb19-33"><a href="#cb19-33"></a>        <span class="op">;</span>})<span class="op">;</span></span>
<span id="cb19-34"><a href="#cb19-34"></a></span>
<span id="cb19-35"><a href="#cb19-35"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb19-36"><a href="#cb19-36"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_2[d<span class="op">.</span><span class="at">index</span>]<span class="sc">}</span></span>
<span id="cb19-37"><a href="#cb19-37"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> lähtee →</span></span>
<span id="cb19-38"><a href="#cb19-38"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> tulee ←</span></span>
<span id="cb19-39"><a href="#cb19-39"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> netto =`</span>)<span class="op">;</span>  </span>
<span id="cb19-40"><a href="#cb19-40"></a></span>
<span id="cb19-41"><a href="#cb19-41"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb19-42"><a href="#cb19-42"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill-opacity"</span><span class="op">,</span> <span class="fl">0.75</span>)</span>
<span id="cb19-43"><a href="#cb19-43"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb19-44"><a href="#cb19-44"></a>    <span class="op">.</span><span class="fu">data</span>(chords)</span>
<span id="cb19-45"><a href="#cb19-45"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"path"</span>)</span>
<span id="cb19-46"><a href="#cb19-46"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"mix-blend-mode"</span><span class="op">,</span> <span class="st">"multiply"</span>)</span>
<span id="cb19-47"><a href="#cb19-47"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb19-48"><a href="#cb19-48"></a>                        <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#28336C"</span>}</span>
<span id="cb19-49"><a href="#cb19-49"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#28336C"</span> }</span>
<span id="cb19-50"><a href="#cb19-50"></a>        <span class="op">;</span>})</span>
<span id="cb19-51"><a href="#cb19-51"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> ribbon_2)</span>
<span id="cb19-52"><a href="#cb19-52"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb19-53"><a href="#cb19-53"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_2[d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> --&gt; </span><span class="sc">${</span>names_2[d<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb19-54"><a href="#cb19-54"></a></span>
<span id="cb19-55"><a href="#cb19-55"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb19-56"><a href="#cb19-56"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-19" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="kangasalan-ja-lempäälän-pienalueiden-muuttoliike-2021" class="slide level2" data-number="4.3">
<h2><span class="header-section-number">4.3</span> Kangasalan ja Lempäälän pienalueiden muuttoliike 2021</h2>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb20" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb20--1"><a href="#cb20--1"></a>ribbon_3 <span class="op">=</span> d3<span class="op">.</span><span class="fu">ribbon</span>()</span>
<span id="cb20-0"><a href="#cb20-0"></a>    <span class="op">.</span><span class="fu">radius</span>(innerRadius <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb20-1"><a href="#cb20-1"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="fl">2.5</span><span class="op">/</span> innerRadius)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-20" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb21" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb21--1"><a href="#cb21--1"></a>chord_3 <span class="op">=</span> d3<span class="op">.</span><span class="fu">chordDirected</span>()</span>
<span id="cb21-0"><a href="#cb21-0"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="dv">1</span> <span class="op">/</span> innerRadius)</span>
<span id="cb21-1"><a href="#cb21-1"></a>    <span class="op">.</span><span class="fu">sortSubgroups</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span>
<span id="cb21-2"><a href="#cb21-2"></a>    <span class="op">.</span><span class="fu">sortChords</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-21" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb22" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb22--1"><a href="#cb22--1"></a>matrix_3 <span class="op">=</span> {</span>
<span id="cb22-0"><a href="#cb22-0"></a>  <span class="kw">const</span> index <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>(names_3<span class="op">.</span><span class="fu">map</span>((name<span class="op">,</span> i) <span class="kw">=&gt;</span> [name<span class="op">,</span> i]))<span class="op">;</span></span>
<span id="cb22-1"><a href="#cb22-1"></a>  <span class="kw">const</span> matrix_3 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(index<span class="op">,</span> () <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Array</span>(names_3<span class="op">.</span><span class="at">length</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>))<span class="op">;</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="cf">for</span> (<span class="kw">const</span> {source<span class="op">,</span> target<span class="op">,</span> value} <span class="kw">of</span> data_3) matrix_3[index<span class="op">.</span><span class="fu">get</span>(source)][index<span class="op">.</span><span class="fu">get</span>(target)] <span class="op">+=</span> value<span class="op">;</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="cf">return</span> matrix_3<span class="op">;</span></span>
<span id="cb22-4"><a href="#cb22-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-22" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb23" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb23--1"><a href="#cb23--1"></a>names_3 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(<span class="kw">new</span> <span class="bu">Set</span>(data_3<span class="op">.</span><span class="fu">flatMap</span>(d <span class="kw">=&gt;</span> [d<span class="op">.</span><span class="at">source</span><span class="op">,</span> d<span class="op">.</span><span class="at">target</span>])))<span class="op">.</span><span class="fu">sort</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-23" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb24" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb24--1"><a href="#cb24--1"></a>rename_3 <span class="op">=</span> name <span class="kw">=&gt;</span> name<span class="op">.</span><span class="fu">substring</span>(name<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">"."</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> name<span class="op">.</span><span class="fu">lastIndexOf</span>(<span class="st">"."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-24" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb25" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb25--1"><a href="#cb25--1"></a>chart_3 <span class="op">=</span> {</span>
<span id="cb25-0"><a href="#cb25-0"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb25-1"><a href="#cb25-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="op">-</span>width <span class="op">/</span> <span class="dv">2</span><span class="op">,</span> <span class="op">-</span>height <span class="op">/</span> <span class="dv">3</span><span class="op">,</span> width<span class="op">,</span> height])<span class="op">;</span></span>
<span id="cb25-2"><a href="#cb25-2"></a></span>
<span id="cb25-3"><a href="#cb25-3"></a>  <span class="kw">const</span> chords <span class="op">=</span> <span class="fu">chord_3</span>(matrix_3)<span class="op">;</span></span>
<span id="cb25-4"><a href="#cb25-4"></a></span>
<span id="cb25-5"><a href="#cb25-5"></a>  <span class="kw">const</span> group <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb25-6"><a href="#cb25-6"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb25-7"><a href="#cb25-7"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-family"</span><span class="op">,</span> <span class="st">"Century Gothic"</span>)</span>
<span id="cb25-8"><a href="#cb25-8"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)</span>
<span id="cb25-9"><a href="#cb25-9"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g"</span>)</span>
<span id="cb25-10"><a href="#cb25-10"></a>    <span class="op">.</span><span class="fu">data</span>(chords<span class="op">.</span><span class="at">groups</span>)</span>
<span id="cb25-11"><a href="#cb25-11"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb25-12"><a href="#cb25-12"></a></span>
<span id="cb25-13"><a href="#cb25-13"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb25-14"><a href="#cb25-14"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb25-15"><a href="#cb25-15"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb25-16"><a href="#cb25-16"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb25-17"><a href="#cb25-17"></a>        <span class="op">;</span>})</span>
<span id="cb25-18"><a href="#cb25-18"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> arc)<span class="op">;</span></span>
<span id="cb25-19"><a href="#cb25-19"></a>  </span>
<span id="cb25-20"><a href="#cb25-20"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb25-21"><a href="#cb25-21"></a>      <span class="op">.</span><span class="fu">each</span>(d <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">angle</span> <span class="op">=</span> (d<span class="op">.</span><span class="at">startAngle</span> <span class="op">+</span> d<span class="op">.</span><span class="at">endAngle</span>) <span class="op">/</span> <span class="dv">2</span>))</span>
<span id="cb25-22"><a href="#cb25-22"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dy"</span><span class="op">,</span> <span class="st">"0.35em"</span>)</span>
<span id="cb25-23"><a href="#cb25-23"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`</span></span>
<span id="cb25-24"><a href="#cb25-24"></a><span class="vs">        rotate(</span><span class="sc">${</span>(d<span class="op">.</span><span class="at">angle</span> <span class="op">*</span> <span class="dv">180</span> <span class="op">/</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">-</span> <span class="dv">90</span>)<span class="sc">}</span><span class="vs">)</span></span>
<span id="cb25-25"><a href="#cb25-25"></a><span class="vs">        translate(</span><span class="sc">${</span>outerRadius <span class="op">+</span> <span class="dv">5</span><span class="sc">}</span><span class="vs">)</span></span>
<span id="cb25-26"><a href="#cb25-26"></a><span class="vs">        </span><span class="sc">${</span>d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"rotate(180)"</span> <span class="op">:</span> <span class="st">""</span><span class="sc">}</span></span>
<span id="cb25-27"><a href="#cb25-27"></a><span class="vs">      `</span>)</span>
<span id="cb25-28"><a href="#cb25-28"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"end"</span> <span class="op">:</span> <span class="kw">null</span>)</span>
<span id="cb25-29"><a href="#cb25-29"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> names_3[d<span class="op">.</span><span class="at">index</span>])</span>
<span id="cb25-30"><a href="#cb25-30"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb25-31"><a href="#cb25-31"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb25-32"><a href="#cb25-32"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb25-33"><a href="#cb25-33"></a>        <span class="op">;</span>})<span class="op">;</span></span>
<span id="cb25-34"><a href="#cb25-34"></a></span>
<span id="cb25-35"><a href="#cb25-35"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb25-36"><a href="#cb25-36"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_3[d<span class="op">.</span><span class="at">index</span>]<span class="sc">}</span></span>
<span id="cb25-37"><a href="#cb25-37"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> lähtee →</span></span>
<span id="cb25-38"><a href="#cb25-38"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> tulee ←</span></span>
<span id="cb25-39"><a href="#cb25-39"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> netto =`</span>)<span class="op">;</span>  </span>
<span id="cb25-40"><a href="#cb25-40"></a></span>
<span id="cb25-41"><a href="#cb25-41"></a></span>
<span id="cb25-42"><a href="#cb25-42"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb25-43"><a href="#cb25-43"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill-opacity"</span><span class="op">,</span> <span class="fl">0.75</span>)</span>
<span id="cb25-44"><a href="#cb25-44"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb25-45"><a href="#cb25-45"></a>    <span class="op">.</span><span class="fu">data</span>(chords)</span>
<span id="cb25-46"><a href="#cb25-46"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"path"</span>)</span>
<span id="cb25-47"><a href="#cb25-47"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"mix-blend-mode"</span><span class="op">,</span> <span class="st">"multiply"</span>)</span>
<span id="cb25-48"><a href="#cb25-48"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb25-49"><a href="#cb25-49"></a>                        <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#28336C"</span>}</span>
<span id="cb25-50"><a href="#cb25-50"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#28336C"</span> }</span>
<span id="cb25-51"><a href="#cb25-51"></a>        <span class="op">;</span>})</span>
<span id="cb25-52"><a href="#cb25-52"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> ribbon_3)</span>
<span id="cb25-53"><a href="#cb25-53"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb25-54"><a href="#cb25-54"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_3[d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> --&gt; </span><span class="sc">${</span>names_3[d<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb25-55"><a href="#cb25-55"></a></span>
<span id="cb25-56"><a href="#cb25-56"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb25-57"><a href="#cb25-57"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-25" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="kangasalan-ja-nokian-pienalueiden-muuttoliike-2021" class="slide level2" data-number="4.4">
<h2><span class="header-section-number">4.4</span> Kangasalan ja Nokian pienalueiden muuttoliike 2021</h2>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb26" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb26--1"><a href="#cb26--1"></a>ribbon_4 <span class="op">=</span> d3<span class="op">.</span><span class="fu">ribbon</span>()</span>
<span id="cb26-0"><a href="#cb26-0"></a>    <span class="op">.</span><span class="fu">radius</span>(innerRadius <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb26-1"><a href="#cb26-1"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="fl">3.5</span><span class="op">/</span> innerRadius)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-26" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb27" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb27--1"><a href="#cb27--1"></a>chord_4 <span class="op">=</span> d3<span class="op">.</span><span class="fu">chordDirected</span>()</span>
<span id="cb27-0"><a href="#cb27-0"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="dv">1</span> <span class="op">/</span> innerRadius)</span>
<span id="cb27-1"><a href="#cb27-1"></a>    <span class="op">.</span><span class="fu">sortSubgroups</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span>
<span id="cb27-2"><a href="#cb27-2"></a>    <span class="op">.</span><span class="fu">sortChords</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-27" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb28" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb28--1"><a href="#cb28--1"></a>matrix_4 <span class="op">=</span> {</span>
<span id="cb28-0"><a href="#cb28-0"></a>  <span class="kw">const</span> index <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>(names_4<span class="op">.</span><span class="fu">map</span>((name<span class="op">,</span> i) <span class="kw">=&gt;</span> [name<span class="op">,</span> i]))<span class="op">;</span></span>
<span id="cb28-1"><a href="#cb28-1"></a>  <span class="kw">const</span> matrix_4 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(index<span class="op">,</span> () <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Array</span>(names_4<span class="op">.</span><span class="at">length</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>))<span class="op">;</span></span>
<span id="cb28-2"><a href="#cb28-2"></a>  <span class="cf">for</span> (<span class="kw">const</span> {source<span class="op">,</span> target<span class="op">,</span> value} <span class="kw">of</span> data_4) matrix_4[index<span class="op">.</span><span class="fu">get</span>(source)][index<span class="op">.</span><span class="fu">get</span>(target)] <span class="op">+=</span> value<span class="op">;</span></span>
<span id="cb28-3"><a href="#cb28-3"></a>  <span class="cf">return</span> matrix_4<span class="op">;</span></span>
<span id="cb28-4"><a href="#cb28-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-28" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb29" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb29--1"><a href="#cb29--1"></a>names_4 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(<span class="kw">new</span> <span class="bu">Set</span>(data_4<span class="op">.</span><span class="fu">flatMap</span>(d <span class="kw">=&gt;</span> [d<span class="op">.</span><span class="at">source</span><span class="op">,</span> d<span class="op">.</span><span class="at">target</span>])))<span class="op">.</span><span class="fu">sort</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-29" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb30" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb30--1"><a href="#cb30--1"></a>rename_4 <span class="op">=</span> name <span class="kw">=&gt;</span> name<span class="op">.</span><span class="fu">substring</span>(name<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">"."</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> name<span class="op">.</span><span class="fu">lastIndexOf</span>(<span class="st">"."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-30" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb31" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb31--1"><a href="#cb31--1"></a>chart_4 <span class="op">=</span> {</span>
<span id="cb31-0"><a href="#cb31-0"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb31-1"><a href="#cb31-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="op">-</span>width <span class="op">/</span> <span class="dv">2</span><span class="op">,</span> <span class="op">-</span>height <span class="op">/</span> <span class="dv">3</span><span class="op">,</span> width<span class="op">,</span> height])<span class="op">;</span></span>
<span id="cb31-2"><a href="#cb31-2"></a></span>
<span id="cb31-3"><a href="#cb31-3"></a>  <span class="kw">const</span> chords <span class="op">=</span> <span class="fu">chord_4</span>(matrix_4)<span class="op">;</span></span>
<span id="cb31-4"><a href="#cb31-4"></a></span>
<span id="cb31-5"><a href="#cb31-5"></a>  <span class="kw">const</span> group <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb31-6"><a href="#cb31-6"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb31-7"><a href="#cb31-7"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-family"</span><span class="op">,</span> <span class="st">"Century Gothic"</span>)</span>
<span id="cb31-8"><a href="#cb31-8"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)</span>
<span id="cb31-9"><a href="#cb31-9"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g"</span>)</span>
<span id="cb31-10"><a href="#cb31-10"></a>    <span class="op">.</span><span class="fu">data</span>(chords<span class="op">.</span><span class="at">groups</span>)</span>
<span id="cb31-11"><a href="#cb31-11"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb31-12"><a href="#cb31-12"></a></span>
<span id="cb31-13"><a href="#cb31-13"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb31-14"><a href="#cb31-14"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb31-15"><a href="#cb31-15"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb31-16"><a href="#cb31-16"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb31-17"><a href="#cb31-17"></a>        <span class="op">;</span>})</span>
<span id="cb31-18"><a href="#cb31-18"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> arc)<span class="op">;</span></span>
<span id="cb31-19"><a href="#cb31-19"></a>  </span>
<span id="cb31-20"><a href="#cb31-20"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb31-21"><a href="#cb31-21"></a>      <span class="op">.</span><span class="fu">each</span>(d <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">angle</span> <span class="op">=</span> (d<span class="op">.</span><span class="at">startAngle</span> <span class="op">+</span> d<span class="op">.</span><span class="at">endAngle</span>) <span class="op">/</span> <span class="dv">2</span>))</span>
<span id="cb31-22"><a href="#cb31-22"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dy"</span><span class="op">,</span> <span class="st">"0.35em"</span>)</span>
<span id="cb31-23"><a href="#cb31-23"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`</span></span>
<span id="cb31-24"><a href="#cb31-24"></a><span class="vs">        rotate(</span><span class="sc">${</span>(d<span class="op">.</span><span class="at">angle</span> <span class="op">*</span> <span class="dv">180</span> <span class="op">/</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">-</span> <span class="dv">90</span>)<span class="sc">}</span><span class="vs">)</span></span>
<span id="cb31-25"><a href="#cb31-25"></a><span class="vs">        translate(</span><span class="sc">${</span>outerRadius <span class="op">+</span> <span class="dv">5</span><span class="sc">}</span><span class="vs">)</span></span>
<span id="cb31-26"><a href="#cb31-26"></a><span class="vs">        </span><span class="sc">${</span>d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"rotate(180)"</span> <span class="op">:</span> <span class="st">""</span><span class="sc">}</span></span>
<span id="cb31-27"><a href="#cb31-27"></a><span class="vs">      `</span>)</span>
<span id="cb31-28"><a href="#cb31-28"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"end"</span> <span class="op">:</span> <span class="kw">null</span>)</span>
<span id="cb31-29"><a href="#cb31-29"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> names_4[d<span class="op">.</span><span class="at">index</span>])</span>
<span id="cb31-30"><a href="#cb31-30"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb31-31"><a href="#cb31-31"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb31-32"><a href="#cb31-32"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb31-33"><a href="#cb31-33"></a>        <span class="op">;</span>})<span class="op">;</span></span>
<span id="cb31-34"><a href="#cb31-34"></a></span>
<span id="cb31-35"><a href="#cb31-35"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb31-36"><a href="#cb31-36"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_4[d<span class="op">.</span><span class="at">index</span>]<span class="sc">}</span></span>
<span id="cb31-37"><a href="#cb31-37"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> lähtee →</span></span>
<span id="cb31-38"><a href="#cb31-38"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> tulee ←</span></span>
<span id="cb31-39"><a href="#cb31-39"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> netto =`</span>)<span class="op">;</span>  </span>
<span id="cb31-40"><a href="#cb31-40"></a></span>
<span id="cb31-41"><a href="#cb31-41"></a></span>
<span id="cb31-42"><a href="#cb31-42"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb31-43"><a href="#cb31-43"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill-opacity"</span><span class="op">,</span> <span class="fl">0.75</span>)</span>
<span id="cb31-44"><a href="#cb31-44"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb31-45"><a href="#cb31-45"></a>    <span class="op">.</span><span class="fu">data</span>(chords)</span>
<span id="cb31-46"><a href="#cb31-46"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"path"</span>)</span>
<span id="cb31-47"><a href="#cb31-47"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"mix-blend-mode"</span><span class="op">,</span> <span class="st">"multiply"</span>)</span>
<span id="cb31-48"><a href="#cb31-48"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb31-49"><a href="#cb31-49"></a>                        <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#28336C"</span>}</span>
<span id="cb31-50"><a href="#cb31-50"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#28336C"</span> }</span>
<span id="cb31-51"><a href="#cb31-51"></a>        <span class="op">;</span>})</span>
<span id="cb31-52"><a href="#cb31-52"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> ribbon_4)</span>
<span id="cb31-53"><a href="#cb31-53"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb31-54"><a href="#cb31-54"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_4[d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> --&gt; </span><span class="sc">${</span>names_4[d<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb31-55"><a href="#cb31-55"></a></span>
<span id="cb31-56"><a href="#cb31-56"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb31-57"><a href="#cb31-57"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-31" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="kangasalan-ja-oriveden-pienalueiden-muuttoliike-2021" class="slide level2" data-number="4.5">
<h2><span class="header-section-number">4.5</span> Kangasalan ja Oriveden pienalueiden muuttoliike 2021</h2>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb32" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb32--1"><a href="#cb32--1"></a>ribbon_5 <span class="op">=</span> d3<span class="op">.</span><span class="fu">ribbon</span>()</span>
<span id="cb32-0"><a href="#cb32-0"></a>    <span class="op">.</span><span class="fu">radius</span>(innerRadius <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb32-1"><a href="#cb32-1"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="fl">3.5</span><span class="op">/</span> innerRadius)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-32" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb33" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb33--1"><a href="#cb33--1"></a>chord_5 <span class="op">=</span> d3<span class="op">.</span><span class="fu">chordDirected</span>()</span>
<span id="cb33-0"><a href="#cb33-0"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="dv">1</span> <span class="op">/</span> innerRadius)</span>
<span id="cb33-1"><a href="#cb33-1"></a>    <span class="op">.</span><span class="fu">sortSubgroups</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span>
<span id="cb33-2"><a href="#cb33-2"></a>    <span class="op">.</span><span class="fu">sortChords</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-33" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb34" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb34--1"><a href="#cb34--1"></a>matrix_5 <span class="op">=</span> {</span>
<span id="cb34-0"><a href="#cb34-0"></a>  <span class="kw">const</span> index <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>(names_5<span class="op">.</span><span class="fu">map</span>((name<span class="op">,</span> i) <span class="kw">=&gt;</span> [name<span class="op">,</span> i]))<span class="op">;</span></span>
<span id="cb34-1"><a href="#cb34-1"></a>  <span class="kw">const</span> matrix_5 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(index<span class="op">,</span> () <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Array</span>(names_5<span class="op">.</span><span class="at">length</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>))<span class="op">;</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>  <span class="cf">for</span> (<span class="kw">const</span> {source<span class="op">,</span> target<span class="op">,</span> value} <span class="kw">of</span> data_5) matrix_5[index<span class="op">.</span><span class="fu">get</span>(source)][index<span class="op">.</span><span class="fu">get</span>(target)] <span class="op">+=</span> value<span class="op">;</span></span>
<span id="cb34-3"><a href="#cb34-3"></a>  <span class="cf">return</span> matrix_5<span class="op">;</span></span>
<span id="cb34-4"><a href="#cb34-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-34" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb35" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb35--1"><a href="#cb35--1"></a>names_5 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(<span class="kw">new</span> <span class="bu">Set</span>(data_5<span class="op">.</span><span class="fu">flatMap</span>(d <span class="kw">=&gt;</span> [d<span class="op">.</span><span class="at">source</span><span class="op">,</span> d<span class="op">.</span><span class="at">target</span>])))<span class="op">.</span><span class="fu">sort</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-35" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb36" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb36--1"><a href="#cb36--1"></a>rename_5 <span class="op">=</span> name <span class="kw">=&gt;</span> name<span class="op">.</span><span class="fu">substring</span>(name<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">"."</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> name<span class="op">.</span><span class="fu">lastIndexOf</span>(<span class="st">"."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-36" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb37" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb37--1"><a href="#cb37--1"></a>chart_5 <span class="op">=</span> {</span>
<span id="cb37-0"><a href="#cb37-0"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb37-1"><a href="#cb37-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="op">-</span>width <span class="op">/</span> <span class="dv">2</span><span class="op">,</span> <span class="op">-</span>height <span class="op">/</span> <span class="dv">3</span><span class="op">,</span> width<span class="op">,</span> height])<span class="op">;</span></span>
<span id="cb37-2"><a href="#cb37-2"></a></span>
<span id="cb37-3"><a href="#cb37-3"></a>  <span class="kw">const</span> chords <span class="op">=</span> <span class="fu">chord_5</span>(matrix_5)<span class="op">;</span></span>
<span id="cb37-4"><a href="#cb37-4"></a></span>
<span id="cb37-5"><a href="#cb37-5"></a>  <span class="kw">const</span> group <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb37-6"><a href="#cb37-6"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb37-7"><a href="#cb37-7"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-family"</span><span class="op">,</span> <span class="st">"Century Gothic"</span>)</span>
<span id="cb37-8"><a href="#cb37-8"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)</span>
<span id="cb37-9"><a href="#cb37-9"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g"</span>)</span>
<span id="cb37-10"><a href="#cb37-10"></a>    <span class="op">.</span><span class="fu">data</span>(chords<span class="op">.</span><span class="at">groups</span>)</span>
<span id="cb37-11"><a href="#cb37-11"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb37-12"><a href="#cb37-12"></a></span>
<span id="cb37-13"><a href="#cb37-13"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb37-14"><a href="#cb37-14"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb37-15"><a href="#cb37-15"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb37-16"><a href="#cb37-16"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb37-17"><a href="#cb37-17"></a>        <span class="op">;</span>})</span>
<span id="cb37-18"><a href="#cb37-18"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> arc)<span class="op">;</span></span>
<span id="cb37-19"><a href="#cb37-19"></a>  </span>
<span id="cb37-20"><a href="#cb37-20"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb37-21"><a href="#cb37-21"></a>      <span class="op">.</span><span class="fu">each</span>(d <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">angle</span> <span class="op">=</span> (d<span class="op">.</span><span class="at">startAngle</span> <span class="op">+</span> d<span class="op">.</span><span class="at">endAngle</span>) <span class="op">/</span> <span class="dv">2</span>))</span>
<span id="cb37-22"><a href="#cb37-22"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dy"</span><span class="op">,</span> <span class="st">"0.35em"</span>)</span>
<span id="cb37-23"><a href="#cb37-23"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`</span></span>
<span id="cb37-24"><a href="#cb37-24"></a><span class="vs">        rotate(</span><span class="sc">${</span>(d<span class="op">.</span><span class="at">angle</span> <span class="op">*</span> <span class="dv">180</span> <span class="op">/</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">-</span> <span class="dv">90</span>)<span class="sc">}</span><span class="vs">)</span></span>
<span id="cb37-25"><a href="#cb37-25"></a><span class="vs">        translate(</span><span class="sc">${</span>outerRadius <span class="op">+</span> <span class="dv">5</span><span class="sc">}</span><span class="vs">)</span></span>
<span id="cb37-26"><a href="#cb37-26"></a><span class="vs">        </span><span class="sc">${</span>d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"rotate(180)"</span> <span class="op">:</span> <span class="st">""</span><span class="sc">}</span></span>
<span id="cb37-27"><a href="#cb37-27"></a><span class="vs">      `</span>)</span>
<span id="cb37-28"><a href="#cb37-28"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"end"</span> <span class="op">:</span> <span class="kw">null</span>)</span>
<span id="cb37-29"><a href="#cb37-29"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> names_5[d<span class="op">.</span><span class="at">index</span>])</span>
<span id="cb37-30"><a href="#cb37-30"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb37-31"><a href="#cb37-31"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb37-32"><a href="#cb37-32"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb37-33"><a href="#cb37-33"></a>        <span class="op">;</span>})<span class="op">;</span></span>
<span id="cb37-34"><a href="#cb37-34"></a></span>
<span id="cb37-35"><a href="#cb37-35"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb37-36"><a href="#cb37-36"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_5[d<span class="op">.</span><span class="at">index</span>]<span class="sc">}</span></span>
<span id="cb37-37"><a href="#cb37-37"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> lähtee →</span></span>
<span id="cb37-38"><a href="#cb37-38"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> tulee ←</span></span>
<span id="cb37-39"><a href="#cb37-39"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> netto =`</span>)<span class="op">;</span>  </span>
<span id="cb37-40"><a href="#cb37-40"></a></span>
<span id="cb37-41"><a href="#cb37-41"></a></span>
<span id="cb37-42"><a href="#cb37-42"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb37-43"><a href="#cb37-43"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill-opacity"</span><span class="op">,</span> <span class="fl">0.75</span>)</span>
<span id="cb37-44"><a href="#cb37-44"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb37-45"><a href="#cb37-45"></a>    <span class="op">.</span><span class="fu">data</span>(chords)</span>
<span id="cb37-46"><a href="#cb37-46"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"path"</span>)</span>
<span id="cb37-47"><a href="#cb37-47"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"mix-blend-mode"</span><span class="op">,</span> <span class="st">"multiply"</span>)</span>
<span id="cb37-48"><a href="#cb37-48"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb37-49"><a href="#cb37-49"></a>                        <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#28336C"</span>}</span>
<span id="cb37-50"><a href="#cb37-50"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#28336C"</span> }</span>
<span id="cb37-51"><a href="#cb37-51"></a>        <span class="op">;</span>})</span>
<span id="cb37-52"><a href="#cb37-52"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> ribbon_5)</span>
<span id="cb37-53"><a href="#cb37-53"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb37-54"><a href="#cb37-54"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_5[d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> --&gt; </span><span class="sc">${</span>names_5[d<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb37-55"><a href="#cb37-55"></a></span>
<span id="cb37-56"><a href="#cb37-56"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb37-57"><a href="#cb37-57"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-37" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="kangasalan-ja-pirkkalan-pienalueiden-muuttoliike-2021" class="slide level2" data-number="4.6">
<h2><span class="header-section-number">4.6</span> Kangasalan ja Pirkkalan pienalueiden muuttoliike 2021</h2>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb38" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb38--1"><a href="#cb38--1"></a>ribbon_6 <span class="op">=</span> d3<span class="op">.</span><span class="fu">ribbon</span>()</span>
<span id="cb38-0"><a href="#cb38-0"></a>    <span class="op">.</span><span class="fu">radius</span>(innerRadius <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb38-1"><a href="#cb38-1"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="fl">3.5</span><span class="op">/</span> innerRadius)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-38" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb39" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb39--1"><a href="#cb39--1"></a>chord_6 <span class="op">=</span> d3<span class="op">.</span><span class="fu">chordDirected</span>()</span>
<span id="cb39-0"><a href="#cb39-0"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="dv">1</span> <span class="op">/</span> innerRadius)</span>
<span id="cb39-1"><a href="#cb39-1"></a>    <span class="op">.</span><span class="fu">sortSubgroups</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span>
<span id="cb39-2"><a href="#cb39-2"></a>    <span class="op">.</span><span class="fu">sortChords</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-39" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb40" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb40--1"><a href="#cb40--1"></a>matrix_6 <span class="op">=</span> {</span>
<span id="cb40-0"><a href="#cb40-0"></a>  <span class="kw">const</span> index <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>(names_6<span class="op">.</span><span class="fu">map</span>((name<span class="op">,</span> i) <span class="kw">=&gt;</span> [name<span class="op">,</span> i]))<span class="op">;</span></span>
<span id="cb40-1"><a href="#cb40-1"></a>  <span class="kw">const</span> matrix_6 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(index<span class="op">,</span> () <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Array</span>(names_6<span class="op">.</span><span class="at">length</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>))<span class="op">;</span></span>
<span id="cb40-2"><a href="#cb40-2"></a>  <span class="cf">for</span> (<span class="kw">const</span> {source<span class="op">,</span> target<span class="op">,</span> value} <span class="kw">of</span> data_6) matrix_6[index<span class="op">.</span><span class="fu">get</span>(source)][index<span class="op">.</span><span class="fu">get</span>(target)] <span class="op">+=</span> value<span class="op">;</span></span>
<span id="cb40-3"><a href="#cb40-3"></a>  <span class="cf">return</span> matrix_6<span class="op">;</span></span>
<span id="cb40-4"><a href="#cb40-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-40" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb41" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb41--1"><a href="#cb41--1"></a>names_6 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(<span class="kw">new</span> <span class="bu">Set</span>(data_6<span class="op">.</span><span class="fu">flatMap</span>(d <span class="kw">=&gt;</span> [d<span class="op">.</span><span class="at">source</span><span class="op">,</span> d<span class="op">.</span><span class="at">target</span>])))<span class="op">.</span><span class="fu">sort</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-41" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb42" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb42--1"><a href="#cb42--1"></a>rename_6 <span class="op">=</span> name <span class="kw">=&gt;</span> name<span class="op">.</span><span class="fu">substring</span>(name<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">"."</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> name<span class="op">.</span><span class="fu">lastIndexOf</span>(<span class="st">"."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-42" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb43" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb43--1"><a href="#cb43--1"></a>chart_6 <span class="op">=</span> {</span>
<span id="cb43-0"><a href="#cb43-0"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb43-1"><a href="#cb43-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="op">-</span>width <span class="op">/</span> <span class="dv">2</span><span class="op">,</span> <span class="op">-</span>height <span class="op">/</span> <span class="dv">3</span><span class="op">,</span> width<span class="op">,</span> height])<span class="op">;</span></span>
<span id="cb43-2"><a href="#cb43-2"></a></span>
<span id="cb43-3"><a href="#cb43-3"></a>  <span class="kw">const</span> chords <span class="op">=</span> <span class="fu">chord_6</span>(matrix_6)<span class="op">;</span></span>
<span id="cb43-4"><a href="#cb43-4"></a></span>
<span id="cb43-5"><a href="#cb43-5"></a>  <span class="kw">const</span> group <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb43-6"><a href="#cb43-6"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb43-7"><a href="#cb43-7"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-family"</span><span class="op">,</span> <span class="st">"Century Gothic"</span>)</span>
<span id="cb43-8"><a href="#cb43-8"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)</span>
<span id="cb43-9"><a href="#cb43-9"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g"</span>)</span>
<span id="cb43-10"><a href="#cb43-10"></a>    <span class="op">.</span><span class="fu">data</span>(chords<span class="op">.</span><span class="at">groups</span>)</span>
<span id="cb43-11"><a href="#cb43-11"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb43-12"><a href="#cb43-12"></a></span>
<span id="cb43-13"><a href="#cb43-13"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb43-14"><a href="#cb43-14"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb43-15"><a href="#cb43-15"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb43-16"><a href="#cb43-16"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb43-17"><a href="#cb43-17"></a>        <span class="op">;</span>})</span>
<span id="cb43-18"><a href="#cb43-18"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> arc)<span class="op">;</span></span>
<span id="cb43-19"><a href="#cb43-19"></a>  </span>
<span id="cb43-20"><a href="#cb43-20"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb43-21"><a href="#cb43-21"></a>      <span class="op">.</span><span class="fu">each</span>(d <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">angle</span> <span class="op">=</span> (d<span class="op">.</span><span class="at">startAngle</span> <span class="op">+</span> d<span class="op">.</span><span class="at">endAngle</span>) <span class="op">/</span> <span class="dv">2</span>))</span>
<span id="cb43-22"><a href="#cb43-22"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dy"</span><span class="op">,</span> <span class="st">"0.35em"</span>)</span>
<span id="cb43-23"><a href="#cb43-23"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`</span></span>
<span id="cb43-24"><a href="#cb43-24"></a><span class="vs">        rotate(</span><span class="sc">${</span>(d<span class="op">.</span><span class="at">angle</span> <span class="op">*</span> <span class="dv">180</span> <span class="op">/</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">-</span> <span class="dv">90</span>)<span class="sc">}</span><span class="vs">)</span></span>
<span id="cb43-25"><a href="#cb43-25"></a><span class="vs">        translate(</span><span class="sc">${</span>outerRadius <span class="op">+</span> <span class="dv">5</span><span class="sc">}</span><span class="vs">)</span></span>
<span id="cb43-26"><a href="#cb43-26"></a><span class="vs">        </span><span class="sc">${</span>d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"rotate(180)"</span> <span class="op">:</span> <span class="st">""</span><span class="sc">}</span></span>
<span id="cb43-27"><a href="#cb43-27"></a><span class="vs">      `</span>)</span>
<span id="cb43-28"><a href="#cb43-28"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"end"</span> <span class="op">:</span> <span class="kw">null</span>)</span>
<span id="cb43-29"><a href="#cb43-29"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> names_6[d<span class="op">.</span><span class="at">index</span>])</span>
<span id="cb43-30"><a href="#cb43-30"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb43-31"><a href="#cb43-31"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb43-32"><a href="#cb43-32"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb43-33"><a href="#cb43-33"></a>        <span class="op">;</span>})<span class="op">;</span></span>
<span id="cb43-34"><a href="#cb43-34"></a></span>
<span id="cb43-35"><a href="#cb43-35"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb43-36"><a href="#cb43-36"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_6[d<span class="op">.</span><span class="at">index</span>]<span class="sc">}</span></span>
<span id="cb43-37"><a href="#cb43-37"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> lähtee →</span></span>
<span id="cb43-38"><a href="#cb43-38"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> tulee ←</span></span>
<span id="cb43-39"><a href="#cb43-39"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> netto =`</span>)<span class="op">;</span>  </span>
<span id="cb43-40"><a href="#cb43-40"></a></span>
<span id="cb43-41"><a href="#cb43-41"></a></span>
<span id="cb43-42"><a href="#cb43-42"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb43-43"><a href="#cb43-43"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill-opacity"</span><span class="op">,</span> <span class="fl">0.75</span>)</span>
<span id="cb43-44"><a href="#cb43-44"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb43-45"><a href="#cb43-45"></a>    <span class="op">.</span><span class="fu">data</span>(chords)</span>
<span id="cb43-46"><a href="#cb43-46"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"path"</span>)</span>
<span id="cb43-47"><a href="#cb43-47"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"mix-blend-mode"</span><span class="op">,</span> <span class="st">"multiply"</span>)</span>
<span id="cb43-48"><a href="#cb43-48"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb43-49"><a href="#cb43-49"></a>                        <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#28336C"</span>}</span>
<span id="cb43-50"><a href="#cb43-50"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#28336C"</span> }</span>
<span id="cb43-51"><a href="#cb43-51"></a>        <span class="op">;</span>})</span>
<span id="cb43-52"><a href="#cb43-52"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> ribbon_6)</span>
<span id="cb43-53"><a href="#cb43-53"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb43-54"><a href="#cb43-54"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_6[d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> --&gt; </span><span class="sc">${</span>names_6[d<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb43-55"><a href="#cb43-55"></a></span>
<span id="cb43-56"><a href="#cb43-56"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb43-57"><a href="#cb43-57"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-43" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="kangasalan-ja-pälkäneen-pienalueiden-muuttoliike-2021" class="slide level2" data-number="4.7">
<h2><span class="header-section-number">4.7</span> Kangasalan ja Pälkäneen pienalueiden muuttoliike 2021</h2>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb44" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb44--1"><a href="#cb44--1"></a>ribbon_7 <span class="op">=</span> d3<span class="op">.</span><span class="fu">ribbon</span>()</span>
<span id="cb44-0"><a href="#cb44-0"></a>    <span class="op">.</span><span class="fu">radius</span>(innerRadius <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb44-1"><a href="#cb44-1"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="dv">2</span><span class="op">/</span> innerRadius)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-44" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb45" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb45--1"><a href="#cb45--1"></a>chord_7 <span class="op">=</span> d3<span class="op">.</span><span class="fu">chordDirected</span>()</span>
<span id="cb45-0"><a href="#cb45-0"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="dv">1</span> <span class="op">/</span> innerRadius)</span>
<span id="cb45-1"><a href="#cb45-1"></a>    <span class="op">.</span><span class="fu">sortSubgroups</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span>
<span id="cb45-2"><a href="#cb45-2"></a>    <span class="op">.</span><span class="fu">sortChords</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-45" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb46" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb46--1"><a href="#cb46--1"></a>matrix_7 <span class="op">=</span> {</span>
<span id="cb46-0"><a href="#cb46-0"></a>  <span class="kw">const</span> index <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>(names_7<span class="op">.</span><span class="fu">map</span>((name<span class="op">,</span> i) <span class="kw">=&gt;</span> [name<span class="op">,</span> i]))<span class="op">;</span></span>
<span id="cb46-1"><a href="#cb46-1"></a>  <span class="kw">const</span> matrix_7 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(index<span class="op">,</span> () <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Array</span>(names_7<span class="op">.</span><span class="at">length</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>))<span class="op">;</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>  <span class="cf">for</span> (<span class="kw">const</span> {source<span class="op">,</span> target<span class="op">,</span> value} <span class="kw">of</span> data_7) matrix_7[index<span class="op">.</span><span class="fu">get</span>(source)][index<span class="op">.</span><span class="fu">get</span>(target)] <span class="op">+=</span> value<span class="op">;</span></span>
<span id="cb46-3"><a href="#cb46-3"></a>  <span class="cf">return</span> matrix_7<span class="op">;</span></span>
<span id="cb46-4"><a href="#cb46-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-46" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb47" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb47--1"><a href="#cb47--1"></a>names_7 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(<span class="kw">new</span> <span class="bu">Set</span>(data_7<span class="op">.</span><span class="fu">flatMap</span>(d <span class="kw">=&gt;</span> [d<span class="op">.</span><span class="at">source</span><span class="op">,</span> d<span class="op">.</span><span class="at">target</span>])))<span class="op">.</span><span class="fu">sort</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-47" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb48" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb48--1"><a href="#cb48--1"></a>rename_7 <span class="op">=</span> name <span class="kw">=&gt;</span> name<span class="op">.</span><span class="fu">substring</span>(name<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">"."</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> name<span class="op">.</span><span class="fu">lastIndexOf</span>(<span class="st">"."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-48" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb49" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb49--1"><a href="#cb49--1"></a>chart_7 <span class="op">=</span> {</span>
<span id="cb49-0"><a href="#cb49-0"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb49-1"><a href="#cb49-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="op">-</span>width <span class="op">/</span> <span class="dv">2</span><span class="op">,</span> <span class="op">-</span>height <span class="op">/</span> <span class="dv">3</span><span class="op">,</span> width<span class="op">,</span> height])<span class="op">;</span></span>
<span id="cb49-2"><a href="#cb49-2"></a></span>
<span id="cb49-3"><a href="#cb49-3"></a>  <span class="kw">const</span> chords <span class="op">=</span> <span class="fu">chord_7</span>(matrix_7)<span class="op">;</span></span>
<span id="cb49-4"><a href="#cb49-4"></a></span>
<span id="cb49-5"><a href="#cb49-5"></a>  <span class="kw">const</span> group <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb49-6"><a href="#cb49-6"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb49-7"><a href="#cb49-7"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-family"</span><span class="op">,</span> <span class="st">"Century Gothic"</span>)</span>
<span id="cb49-8"><a href="#cb49-8"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)</span>
<span id="cb49-9"><a href="#cb49-9"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g"</span>)</span>
<span id="cb49-10"><a href="#cb49-10"></a>    <span class="op">.</span><span class="fu">data</span>(chords<span class="op">.</span><span class="at">groups</span>)</span>
<span id="cb49-11"><a href="#cb49-11"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb49-12"><a href="#cb49-12"></a></span>
<span id="cb49-13"><a href="#cb49-13"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb49-14"><a href="#cb49-14"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb49-15"><a href="#cb49-15"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb49-16"><a href="#cb49-16"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb49-17"><a href="#cb49-17"></a>        <span class="op">;</span>})</span>
<span id="cb49-18"><a href="#cb49-18"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> arc)<span class="op">;</span></span>
<span id="cb49-19"><a href="#cb49-19"></a>  </span>
<span id="cb49-20"><a href="#cb49-20"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb49-21"><a href="#cb49-21"></a>      <span class="op">.</span><span class="fu">each</span>(d <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">angle</span> <span class="op">=</span> (d<span class="op">.</span><span class="at">startAngle</span> <span class="op">+</span> d<span class="op">.</span><span class="at">endAngle</span>) <span class="op">/</span> <span class="dv">2</span>))</span>
<span id="cb49-22"><a href="#cb49-22"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dy"</span><span class="op">,</span> <span class="st">"0.35em"</span>)</span>
<span id="cb49-23"><a href="#cb49-23"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`</span></span>
<span id="cb49-24"><a href="#cb49-24"></a><span class="vs">        rotate(</span><span class="sc">${</span>(d<span class="op">.</span><span class="at">angle</span> <span class="op">*</span> <span class="dv">180</span> <span class="op">/</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">-</span> <span class="dv">90</span>)<span class="sc">}</span><span class="vs">)</span></span>
<span id="cb49-25"><a href="#cb49-25"></a><span class="vs">        translate(</span><span class="sc">${</span>outerRadius <span class="op">+</span> <span class="dv">5</span><span class="sc">}</span><span class="vs">)</span></span>
<span id="cb49-26"><a href="#cb49-26"></a><span class="vs">        </span><span class="sc">${</span>d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"rotate(180)"</span> <span class="op">:</span> <span class="st">""</span><span class="sc">}</span></span>
<span id="cb49-27"><a href="#cb49-27"></a><span class="vs">      `</span>)</span>
<span id="cb49-28"><a href="#cb49-28"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"end"</span> <span class="op">:</span> <span class="kw">null</span>)</span>
<span id="cb49-29"><a href="#cb49-29"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> names_7[d<span class="op">.</span><span class="at">index</span>])</span>
<span id="cb49-30"><a href="#cb49-30"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb49-31"><a href="#cb49-31"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb49-32"><a href="#cb49-32"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb49-33"><a href="#cb49-33"></a>        <span class="op">;</span>})<span class="op">;</span></span>
<span id="cb49-34"><a href="#cb49-34"></a></span>
<span id="cb49-35"><a href="#cb49-35"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb49-36"><a href="#cb49-36"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_7[d<span class="op">.</span><span class="at">index</span>]<span class="sc">}</span></span>
<span id="cb49-37"><a href="#cb49-37"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> lähtee →</span></span>
<span id="cb49-38"><a href="#cb49-38"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> tulee ←</span></span>
<span id="cb49-39"><a href="#cb49-39"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> netto =`</span>)<span class="op">;</span>  </span>
<span id="cb49-40"><a href="#cb49-40"></a></span>
<span id="cb49-41"><a href="#cb49-41"></a></span>
<span id="cb49-42"><a href="#cb49-42"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb49-43"><a href="#cb49-43"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill-opacity"</span><span class="op">,</span> <span class="fl">0.75</span>)</span>
<span id="cb49-44"><a href="#cb49-44"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb49-45"><a href="#cb49-45"></a>    <span class="op">.</span><span class="fu">data</span>(chords)</span>
<span id="cb49-46"><a href="#cb49-46"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"path"</span>)</span>
<span id="cb49-47"><a href="#cb49-47"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"mix-blend-mode"</span><span class="op">,</span> <span class="st">"multiply"</span>)</span>
<span id="cb49-48"><a href="#cb49-48"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb49-49"><a href="#cb49-49"></a>                        <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#28336C"</span>}</span>
<span id="cb49-50"><a href="#cb49-50"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#28336C"</span> }</span>
<span id="cb49-51"><a href="#cb49-51"></a>        <span class="op">;</span>})</span>
<span id="cb49-52"><a href="#cb49-52"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> ribbon_7)</span>
<span id="cb49-53"><a href="#cb49-53"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb49-54"><a href="#cb49-54"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_7[d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> --&gt; </span><span class="sc">${</span>names_7[d<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb49-55"><a href="#cb49-55"></a></span>
<span id="cb49-56"><a href="#cb49-56"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb49-57"><a href="#cb49-57"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-49" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="kangasalan-ja-akaan-pienalueiden-muuttoliike-2021" class="slide level2" data-number="4.8">
<h2><span class="header-section-number">4.8</span> Kangasalan ja Akaan pienalueiden muuttoliike 2021</h2>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb50" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb50--1"><a href="#cb50--1"></a>ribbon_8 <span class="op">=</span> d3<span class="op">.</span><span class="fu">ribbon</span>()</span>
<span id="cb50-0"><a href="#cb50-0"></a>    <span class="op">.</span><span class="fu">radius</span>(innerRadius <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb50-1"><a href="#cb50-1"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="dv">4</span><span class="op">/</span> innerRadius)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-50" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb51" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb51--1"><a href="#cb51--1"></a>chord_8 <span class="op">=</span> d3<span class="op">.</span><span class="fu">chordDirected</span>()</span>
<span id="cb51-0"><a href="#cb51-0"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="dv">1</span> <span class="op">/</span> innerRadius)</span>
<span id="cb51-1"><a href="#cb51-1"></a>    <span class="op">.</span><span class="fu">sortSubgroups</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span>
<span id="cb51-2"><a href="#cb51-2"></a>    <span class="op">.</span><span class="fu">sortChords</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-51" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb52" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb52--1"><a href="#cb52--1"></a>matrix_8 <span class="op">=</span> {</span>
<span id="cb52-0"><a href="#cb52-0"></a>  <span class="kw">const</span> index <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>(names_8<span class="op">.</span><span class="fu">map</span>((name<span class="op">,</span> i) <span class="kw">=&gt;</span> [name<span class="op">,</span> i]))<span class="op">;</span></span>
<span id="cb52-1"><a href="#cb52-1"></a>  <span class="kw">const</span> matrix_8 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(index<span class="op">,</span> () <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Array</span>(names_8<span class="op">.</span><span class="at">length</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>))<span class="op">;</span></span>
<span id="cb52-2"><a href="#cb52-2"></a>  <span class="cf">for</span> (<span class="kw">const</span> {source<span class="op">,</span> target<span class="op">,</span> value} <span class="kw">of</span> data_8) matrix_8[index<span class="op">.</span><span class="fu">get</span>(source)][index<span class="op">.</span><span class="fu">get</span>(target)] <span class="op">+=</span> value<span class="op">;</span></span>
<span id="cb52-3"><a href="#cb52-3"></a>  <span class="cf">return</span> matrix_8<span class="op">;</span></span>
<span id="cb52-4"><a href="#cb52-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-52" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb53" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb53--1"><a href="#cb53--1"></a>names_8 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(<span class="kw">new</span> <span class="bu">Set</span>(data_8<span class="op">.</span><span class="fu">flatMap</span>(d <span class="kw">=&gt;</span> [d<span class="op">.</span><span class="at">source</span><span class="op">,</span> d<span class="op">.</span><span class="at">target</span>])))<span class="op">.</span><span class="fu">sort</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-53" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb54" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb54--1"><a href="#cb54--1"></a>rename_8 <span class="op">=</span> name <span class="kw">=&gt;</span> name<span class="op">.</span><span class="fu">substring</span>(name<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">"."</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> name<span class="op">.</span><span class="fu">lastIndexOf</span>(<span class="st">"."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-54" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb55" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb55--1"><a href="#cb55--1"></a>chart_8 <span class="op">=</span> {</span>
<span id="cb55-0"><a href="#cb55-0"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb55-1"><a href="#cb55-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="op">-</span>width <span class="op">/</span> <span class="dv">2</span><span class="op">,</span> <span class="op">-</span>height <span class="op">/</span> <span class="dv">3</span><span class="op">,</span> width<span class="op">,</span> height])<span class="op">;</span></span>
<span id="cb55-2"><a href="#cb55-2"></a></span>
<span id="cb55-3"><a href="#cb55-3"></a>  <span class="kw">const</span> chords <span class="op">=</span> <span class="fu">chord_8</span>(matrix_8)<span class="op">;</span></span>
<span id="cb55-4"><a href="#cb55-4"></a></span>
<span id="cb55-5"><a href="#cb55-5"></a>  <span class="kw">const</span> group <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb55-6"><a href="#cb55-6"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb55-7"><a href="#cb55-7"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-family"</span><span class="op">,</span> <span class="st">"Century Gothic"</span>)</span>
<span id="cb55-8"><a href="#cb55-8"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)</span>
<span id="cb55-9"><a href="#cb55-9"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g"</span>)</span>
<span id="cb55-10"><a href="#cb55-10"></a>    <span class="op">.</span><span class="fu">data</span>(chords<span class="op">.</span><span class="at">groups</span>)</span>
<span id="cb55-11"><a href="#cb55-11"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb55-12"><a href="#cb55-12"></a></span>
<span id="cb55-13"><a href="#cb55-13"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb55-14"><a href="#cb55-14"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb55-15"><a href="#cb55-15"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb55-16"><a href="#cb55-16"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb55-17"><a href="#cb55-17"></a>        <span class="op">;</span>})</span>
<span id="cb55-18"><a href="#cb55-18"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> arc)<span class="op">;</span></span>
<span id="cb55-19"><a href="#cb55-19"></a>  </span>
<span id="cb55-20"><a href="#cb55-20"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb55-21"><a href="#cb55-21"></a>      <span class="op">.</span><span class="fu">each</span>(d <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">angle</span> <span class="op">=</span> (d<span class="op">.</span><span class="at">startAngle</span> <span class="op">+</span> d<span class="op">.</span><span class="at">endAngle</span>) <span class="op">/</span> <span class="dv">2</span>))</span>
<span id="cb55-22"><a href="#cb55-22"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dy"</span><span class="op">,</span> <span class="st">"0.35em"</span>)</span>
<span id="cb55-23"><a href="#cb55-23"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`</span></span>
<span id="cb55-24"><a href="#cb55-24"></a><span class="vs">        rotate(</span><span class="sc">${</span>(d<span class="op">.</span><span class="at">angle</span> <span class="op">*</span> <span class="dv">180</span> <span class="op">/</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">-</span> <span class="dv">90</span>)<span class="sc">}</span><span class="vs">)</span></span>
<span id="cb55-25"><a href="#cb55-25"></a><span class="vs">        translate(</span><span class="sc">${</span>outerRadius <span class="op">+</span> <span class="dv">5</span><span class="sc">}</span><span class="vs">)</span></span>
<span id="cb55-26"><a href="#cb55-26"></a><span class="vs">        </span><span class="sc">${</span>d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"rotate(180)"</span> <span class="op">:</span> <span class="st">""</span><span class="sc">}</span></span>
<span id="cb55-27"><a href="#cb55-27"></a><span class="vs">      `</span>)</span>
<span id="cb55-28"><a href="#cb55-28"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"end"</span> <span class="op">:</span> <span class="kw">null</span>)</span>
<span id="cb55-29"><a href="#cb55-29"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> names_8[d<span class="op">.</span><span class="at">index</span>])</span>
<span id="cb55-30"><a href="#cb55-30"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb55-31"><a href="#cb55-31"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb55-32"><a href="#cb55-32"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb55-33"><a href="#cb55-33"></a>        <span class="op">;</span>})<span class="op">;</span></span>
<span id="cb55-34"><a href="#cb55-34"></a></span>
<span id="cb55-35"><a href="#cb55-35"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb55-36"><a href="#cb55-36"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_8[d<span class="op">.</span><span class="at">index</span>]<span class="sc">}</span></span>
<span id="cb55-37"><a href="#cb55-37"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> lähtee →</span></span>
<span id="cb55-38"><a href="#cb55-38"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> tulee ←</span></span>
<span id="cb55-39"><a href="#cb55-39"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> netto =`</span>)<span class="op">;</span>  </span>
<span id="cb55-40"><a href="#cb55-40"></a></span>
<span id="cb55-41"><a href="#cb55-41"></a></span>
<span id="cb55-42"><a href="#cb55-42"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb55-43"><a href="#cb55-43"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill-opacity"</span><span class="op">,</span> <span class="fl">0.75</span>)</span>
<span id="cb55-44"><a href="#cb55-44"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb55-45"><a href="#cb55-45"></a>    <span class="op">.</span><span class="fu">data</span>(chords)</span>
<span id="cb55-46"><a href="#cb55-46"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"path"</span>)</span>
<span id="cb55-47"><a href="#cb55-47"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"mix-blend-mode"</span><span class="op">,</span> <span class="st">"multiply"</span>)</span>
<span id="cb55-48"><a href="#cb55-48"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb55-49"><a href="#cb55-49"></a>                        <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#28336C"</span>}</span>
<span id="cb55-50"><a href="#cb55-50"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#28336C"</span> }</span>
<span id="cb55-51"><a href="#cb55-51"></a>        <span class="op">;</span>})</span>
<span id="cb55-52"><a href="#cb55-52"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> ribbon_8)</span>
<span id="cb55-53"><a href="#cb55-53"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb55-54"><a href="#cb55-54"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_8[d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> --&gt; </span><span class="sc">${</span>names_8[d<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb55-55"><a href="#cb55-55"></a></span>
<span id="cb55-56"><a href="#cb55-56"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb55-57"><a href="#cb55-57"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-55" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="kangasalan-ja-valkeakosken-pienalueiden-muuttoliike-2021" class="slide level2" data-number="4.9">
<h2><span class="header-section-number">4.9</span> Kangasalan ja Valkeakosken pienalueiden muuttoliike 2021</h2>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb56" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb56--1"><a href="#cb56--1"></a>ribbon_9 <span class="op">=</span> d3<span class="op">.</span><span class="fu">ribbon</span>()</span>
<span id="cb56-0"><a href="#cb56-0"></a>    <span class="op">.</span><span class="fu">radius</span>(innerRadius <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb56-1"><a href="#cb56-1"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="fl">3.5</span><span class="op">/</span> innerRadius)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-56" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb57" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb57--1"><a href="#cb57--1"></a>chord_9 <span class="op">=</span> d3<span class="op">.</span><span class="fu">chordDirected</span>()</span>
<span id="cb57-0"><a href="#cb57-0"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="dv">1</span> <span class="op">/</span> innerRadius)</span>
<span id="cb57-1"><a href="#cb57-1"></a>    <span class="op">.</span><span class="fu">sortSubgroups</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span>
<span id="cb57-2"><a href="#cb57-2"></a>    <span class="op">.</span><span class="fu">sortChords</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-57" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb58" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb58--1"><a href="#cb58--1"></a>matrix_9 <span class="op">=</span> {</span>
<span id="cb58-0"><a href="#cb58-0"></a>  <span class="kw">const</span> index <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>(names_9<span class="op">.</span><span class="fu">map</span>((name<span class="op">,</span> i) <span class="kw">=&gt;</span> [name<span class="op">,</span> i]))<span class="op">;</span></span>
<span id="cb58-1"><a href="#cb58-1"></a>  <span class="kw">const</span> matrix_9 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(index<span class="op">,</span> () <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Array</span>(names_9<span class="op">.</span><span class="at">length</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>))<span class="op">;</span></span>
<span id="cb58-2"><a href="#cb58-2"></a>  <span class="cf">for</span> (<span class="kw">const</span> {source<span class="op">,</span> target<span class="op">,</span> value} <span class="kw">of</span> data_9) matrix_9[index<span class="op">.</span><span class="fu">get</span>(source)][index<span class="op">.</span><span class="fu">get</span>(target)] <span class="op">+=</span> value<span class="op">;</span></span>
<span id="cb58-3"><a href="#cb58-3"></a>  <span class="cf">return</span> matrix_9<span class="op">;</span></span>
<span id="cb58-4"><a href="#cb58-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-58" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb59" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb59--1"><a href="#cb59--1"></a>names_9 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(<span class="kw">new</span> <span class="bu">Set</span>(data_9<span class="op">.</span><span class="fu">flatMap</span>(d <span class="kw">=&gt;</span> [d<span class="op">.</span><span class="at">source</span><span class="op">,</span> d<span class="op">.</span><span class="at">target</span>])))<span class="op">.</span><span class="fu">sort</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-59" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb60" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb60--1"><a href="#cb60--1"></a>rename_9 <span class="op">=</span> name <span class="kw">=&gt;</span> name<span class="op">.</span><span class="fu">substring</span>(name<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">"."</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> name<span class="op">.</span><span class="fu">lastIndexOf</span>(<span class="st">"."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-60" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb61" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb61--1"><a href="#cb61--1"></a>chart_9 <span class="op">=</span> {</span>
<span id="cb61-0"><a href="#cb61-0"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb61-1"><a href="#cb61-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="op">-</span>width <span class="op">/</span> <span class="dv">2</span><span class="op">,</span> <span class="op">-</span>height <span class="op">/</span> <span class="dv">3</span><span class="op">,</span> width<span class="op">,</span> height])<span class="op">;</span></span>
<span id="cb61-2"><a href="#cb61-2"></a></span>
<span id="cb61-3"><a href="#cb61-3"></a>  <span class="kw">const</span> chords <span class="op">=</span> <span class="fu">chord_9</span>(matrix_9)<span class="op">;</span></span>
<span id="cb61-4"><a href="#cb61-4"></a></span>
<span id="cb61-5"><a href="#cb61-5"></a>  <span class="kw">const</span> group <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb61-6"><a href="#cb61-6"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb61-7"><a href="#cb61-7"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-family"</span><span class="op">,</span> <span class="st">"Century Gothic"</span>)</span>
<span id="cb61-8"><a href="#cb61-8"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)</span>
<span id="cb61-9"><a href="#cb61-9"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g"</span>)</span>
<span id="cb61-10"><a href="#cb61-10"></a>    <span class="op">.</span><span class="fu">data</span>(chords<span class="op">.</span><span class="at">groups</span>)</span>
<span id="cb61-11"><a href="#cb61-11"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb61-12"><a href="#cb61-12"></a></span>
<span id="cb61-13"><a href="#cb61-13"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb61-14"><a href="#cb61-14"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb61-15"><a href="#cb61-15"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb61-16"><a href="#cb61-16"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb61-17"><a href="#cb61-17"></a>        <span class="op">;</span>})</span>
<span id="cb61-18"><a href="#cb61-18"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> arc)<span class="op">;</span></span>
<span id="cb61-19"><a href="#cb61-19"></a>  </span>
<span id="cb61-20"><a href="#cb61-20"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb61-21"><a href="#cb61-21"></a>      <span class="op">.</span><span class="fu">each</span>(d <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">angle</span> <span class="op">=</span> (d<span class="op">.</span><span class="at">startAngle</span> <span class="op">+</span> d<span class="op">.</span><span class="at">endAngle</span>) <span class="op">/</span> <span class="dv">2</span>))</span>
<span id="cb61-22"><a href="#cb61-22"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dy"</span><span class="op">,</span> <span class="st">"0.35em"</span>)</span>
<span id="cb61-23"><a href="#cb61-23"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`</span></span>
<span id="cb61-24"><a href="#cb61-24"></a><span class="vs">        rotate(</span><span class="sc">${</span>(d<span class="op">.</span><span class="at">angle</span> <span class="op">*</span> <span class="dv">180</span> <span class="op">/</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">-</span> <span class="dv">90</span>)<span class="sc">}</span><span class="vs">)</span></span>
<span id="cb61-25"><a href="#cb61-25"></a><span class="vs">        translate(</span><span class="sc">${</span>outerRadius <span class="op">+</span> <span class="dv">5</span><span class="sc">}</span><span class="vs">)</span></span>
<span id="cb61-26"><a href="#cb61-26"></a><span class="vs">        </span><span class="sc">${</span>d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"rotate(180)"</span> <span class="op">:</span> <span class="st">""</span><span class="sc">}</span></span>
<span id="cb61-27"><a href="#cb61-27"></a><span class="vs">      `</span>)</span>
<span id="cb61-28"><a href="#cb61-28"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"end"</span> <span class="op">:</span> <span class="kw">null</span>)</span>
<span id="cb61-29"><a href="#cb61-29"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> names_9[d<span class="op">.</span><span class="at">index</span>])</span>
<span id="cb61-30"><a href="#cb61-30"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb61-31"><a href="#cb61-31"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb61-32"><a href="#cb61-32"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb61-33"><a href="#cb61-33"></a>        <span class="op">;</span>})<span class="op">;</span></span>
<span id="cb61-34"><a href="#cb61-34"></a></span>
<span id="cb61-35"><a href="#cb61-35"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb61-36"><a href="#cb61-36"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_9[d<span class="op">.</span><span class="at">index</span>]<span class="sc">}</span></span>
<span id="cb61-37"><a href="#cb61-37"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> lähtee →</span></span>
<span id="cb61-38"><a href="#cb61-38"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> tulee ←</span></span>
<span id="cb61-39"><a href="#cb61-39"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> netto =`</span>)<span class="op">;</span>  </span>
<span id="cb61-40"><a href="#cb61-40"></a></span>
<span id="cb61-41"><a href="#cb61-41"></a></span>
<span id="cb61-42"><a href="#cb61-42"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb61-43"><a href="#cb61-43"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill-opacity"</span><span class="op">,</span> <span class="fl">0.75</span>)</span>
<span id="cb61-44"><a href="#cb61-44"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb61-45"><a href="#cb61-45"></a>    <span class="op">.</span><span class="fu">data</span>(chords)</span>
<span id="cb61-46"><a href="#cb61-46"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"path"</span>)</span>
<span id="cb61-47"><a href="#cb61-47"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"mix-blend-mode"</span><span class="op">,</span> <span class="st">"multiply"</span>)</span>
<span id="cb61-48"><a href="#cb61-48"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb61-49"><a href="#cb61-49"></a>                        <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#28336C"</span>}</span>
<span id="cb61-50"><a href="#cb61-50"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#28336C"</span> }</span>
<span id="cb61-51"><a href="#cb61-51"></a>        <span class="op">;</span>})</span>
<span id="cb61-52"><a href="#cb61-52"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> ribbon_9)</span>
<span id="cb61-53"><a href="#cb61-53"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb61-54"><a href="#cb61-54"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_9[d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> --&gt; </span><span class="sc">${</span>names_9[d<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb61-55"><a href="#cb61-55"></a></span>
<span id="cb61-56"><a href="#cb61-56"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb61-57"><a href="#cb61-57"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-61" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="kangasalan-ja-ylöjärven-pienalueiden-muuttoliike-2021" class="slide level2" data-number="4.10">
<h2><span class="header-section-number">4.10</span> Kangasalan ja Ylöjärven pienalueiden muuttoliike 2021</h2>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb62" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb62--1"><a href="#cb62--1"></a>ribbon_10 <span class="op">=</span> d3<span class="op">.</span><span class="fu">ribbon</span>()</span>
<span id="cb62-0"><a href="#cb62-0"></a>    <span class="op">.</span><span class="fu">radius</span>(innerRadius <span class="op">-</span> <span class="dv">1</span>)</span>
<span id="cb62-1"><a href="#cb62-1"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="dv">4</span><span class="op">/</span> innerRadius)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-62" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb63" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb63--1"><a href="#cb63--1"></a>chord_10 <span class="op">=</span> d3<span class="op">.</span><span class="fu">chordDirected</span>()</span>
<span id="cb63-0"><a href="#cb63-0"></a>    <span class="op">.</span><span class="fu">padAngle</span>(<span class="dv">1</span> <span class="op">/</span> innerRadius)</span>
<span id="cb63-1"><a href="#cb63-1"></a>    <span class="op">.</span><span class="fu">sortSubgroups</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span>
<span id="cb63-2"><a href="#cb63-2"></a>    <span class="op">.</span><span class="fu">sortChords</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-63" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb64" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb64--1"><a href="#cb64--1"></a>matrix_10 <span class="op">=</span> {</span>
<span id="cb64-0"><a href="#cb64-0"></a>  <span class="kw">const</span> index <span class="op">=</span> <span class="kw">new</span> <span class="bu">Map</span>(names_10<span class="op">.</span><span class="fu">map</span>((name<span class="op">,</span> i) <span class="kw">=&gt;</span> [name<span class="op">,</span> i]))<span class="op">;</span></span>
<span id="cb64-1"><a href="#cb64-1"></a>  <span class="kw">const</span> matrix_10 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(index<span class="op">,</span> () <span class="kw">=&gt;</span> <span class="kw">new</span> <span class="bu">Array</span>(names_10<span class="op">.</span><span class="at">length</span>)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>))<span class="op">;</span></span>
<span id="cb64-2"><a href="#cb64-2"></a>  <span class="cf">for</span> (<span class="kw">const</span> {source<span class="op">,</span> target<span class="op">,</span> value} <span class="kw">of</span> data_10) matrix_10[index<span class="op">.</span><span class="fu">get</span>(source)][index<span class="op">.</span><span class="fu">get</span>(target)] <span class="op">+=</span> value<span class="op">;</span></span>
<span id="cb64-3"><a href="#cb64-3"></a>  <span class="cf">return</span> matrix_10<span class="op">;</span></span>
<span id="cb64-4"><a href="#cb64-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-64" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb65" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb65--1"><a href="#cb65--1"></a>names_10 <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(<span class="kw">new</span> <span class="bu">Set</span>(data_10<span class="op">.</span><span class="fu">flatMap</span>(d <span class="kw">=&gt;</span> [d<span class="op">.</span><span class="at">source</span><span class="op">,</span> d<span class="op">.</span><span class="at">target</span>])))<span class="op">.</span><span class="fu">sort</span>(d3<span class="op">.</span><span class="at">ascending</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-65" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb66" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb66--1"><a href="#cb66--1"></a>rename_10 <span class="op">=</span> name <span class="kw">=&gt;</span> name<span class="op">.</span><span class="fu">substring</span>(name<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">"."</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> name<span class="op">.</span><span class="fu">lastIndexOf</span>(<span class="st">"."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-66" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb67" data-startfrom="-1" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line -2;"><span id="cb67--1"><a href="#cb67--1"></a>chart_10 <span class="op">=</span> {</span>
<span id="cb67-0"><a href="#cb67-0"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb67-1"><a href="#cb67-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="op">-</span>width <span class="op">/</span> <span class="dv">2</span><span class="op">,</span> <span class="op">-</span>height <span class="op">/</span> <span class="dv">3</span><span class="op">,</span> width<span class="op">,</span> height])<span class="op">;</span></span>
<span id="cb67-2"><a href="#cb67-2"></a></span>
<span id="cb67-3"><a href="#cb67-3"></a>  <span class="kw">const</span> chords <span class="op">=</span> <span class="fu">chord_10</span>(matrix_10)<span class="op">;</span></span>
<span id="cb67-4"><a href="#cb67-4"></a></span>
<span id="cb67-5"><a href="#cb67-5"></a>  <span class="kw">const</span> group <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb67-6"><a href="#cb67-6"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb67-7"><a href="#cb67-7"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-family"</span><span class="op">,</span> <span class="st">"Century Gothic"</span>)</span>
<span id="cb67-8"><a href="#cb67-8"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-weight"</span><span class="op">,</span> <span class="st">"bold"</span>)</span>
<span id="cb67-9"><a href="#cb67-9"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g"</span>)</span>
<span id="cb67-10"><a href="#cb67-10"></a>    <span class="op">.</span><span class="fu">data</span>(chords<span class="op">.</span><span class="at">groups</span>)</span>
<span id="cb67-11"><a href="#cb67-11"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"g"</span>)<span class="op">;</span></span>
<span id="cb67-12"><a href="#cb67-12"></a></span>
<span id="cb67-13"><a href="#cb67-13"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb67-14"><a href="#cb67-14"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb67-15"><a href="#cb67-15"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb67-16"><a href="#cb67-16"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb67-17"><a href="#cb67-17"></a>        <span class="op">;</span>})</span>
<span id="cb67-18"><a href="#cb67-18"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> arc)<span class="op">;</span></span>
<span id="cb67-19"><a href="#cb67-19"></a>  </span>
<span id="cb67-20"><a href="#cb67-20"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb67-21"><a href="#cb67-21"></a>      <span class="op">.</span><span class="fu">each</span>(d <span class="kw">=&gt;</span> (d<span class="op">.</span><span class="at">angle</span> <span class="op">=</span> (d<span class="op">.</span><span class="at">startAngle</span> <span class="op">+</span> d<span class="op">.</span><span class="at">endAngle</span>) <span class="op">/</span> <span class="dv">2</span>))</span>
<span id="cb67-22"><a href="#cb67-22"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dy"</span><span class="op">,</span> <span class="st">"0.35em"</span>)</span>
<span id="cb67-23"><a href="#cb67-23"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`</span></span>
<span id="cb67-24"><a href="#cb67-24"></a><span class="vs">        rotate(</span><span class="sc">${</span>(d<span class="op">.</span><span class="at">angle</span> <span class="op">*</span> <span class="dv">180</span> <span class="op">/</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">-</span> <span class="dv">90</span>)<span class="sc">}</span><span class="vs">)</span></span>
<span id="cb67-25"><a href="#cb67-25"></a><span class="vs">        translate(</span><span class="sc">${</span>outerRadius <span class="op">+</span> <span class="dv">5</span><span class="sc">}</span><span class="vs">)</span></span>
<span id="cb67-26"><a href="#cb67-26"></a><span class="vs">        </span><span class="sc">${</span>d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"rotate(180)"</span> <span class="op">:</span> <span class="st">""</span><span class="sc">}</span></span>
<span id="cb67-27"><a href="#cb67-27"></a><span class="vs">      `</span>)</span>
<span id="cb67-28"><a href="#cb67-28"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">angle</span> <span class="op">&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">?</span> <span class="st">"end"</span> <span class="op">:</span> <span class="kw">null</span>)</span>
<span id="cb67-29"><a href="#cb67-29"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> names_10[d<span class="op">.</span><span class="at">index</span>])</span>
<span id="cb67-30"><a href="#cb67-30"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb67-31"><a href="#cb67-31"></a>            <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#009651"</span>}</span>
<span id="cb67-32"><a href="#cb67-32"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#DE232F"</span> }</span>
<span id="cb67-33"><a href="#cb67-33"></a>        <span class="op">;</span>})<span class="op">;</span></span>
<span id="cb67-34"><a href="#cb67-34"></a></span>
<span id="cb67-35"><a href="#cb67-35"></a>  group<span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb67-36"><a href="#cb67-36"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_10[d<span class="op">.</span><span class="at">index</span>]<span class="sc">}</span></span>
<span id="cb67-37"><a href="#cb67-37"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> lähtee →</span></span>
<span id="cb67-38"><a href="#cb67-38"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> tulee ←</span></span>
<span id="cb67-39"><a href="#cb67-39"></a><span class="sc">${</span>d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)<span class="sc">}</span><span class="vs"> netto =`</span>)<span class="op">;</span>  </span>
<span id="cb67-40"><a href="#cb67-40"></a></span>
<span id="cb67-41"><a href="#cb67-41"></a></span>
<span id="cb67-42"><a href="#cb67-42"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb67-43"><a href="#cb67-43"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill-opacity"</span><span class="op">,</span> <span class="fl">0.75</span>)</span>
<span id="cb67-44"><a href="#cb67-44"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb67-45"><a href="#cb67-45"></a>    <span class="op">.</span><span class="fu">data</span>(chords)</span>
<span id="cb67-46"><a href="#cb67-46"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"path"</span>)</span>
<span id="cb67-47"><a href="#cb67-47"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"mix-blend-mode"</span><span class="op">,</span> <span class="st">"multiply"</span>)</span>
<span id="cb67-48"><a href="#cb67-48"></a>              <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb67-49"><a href="#cb67-49"></a>                        <span class="cf">if</span> ((d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">-</span> d3<span class="op">.</span><span class="fu">sum</span>(chords<span class="op">,</span> c <span class="kw">=&gt;</span> (c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span> <span class="op">===</span> d<span class="op">.</span><span class="at">index</span>) <span class="op">*</span> c<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span>)) <span class="op">&gt;=</span> <span class="dv">0</span>) {<span class="cf">return</span> <span class="st">"#28336C"</span>}</span>
<span id="cb67-50"><a href="#cb67-50"></a>            <span class="cf">else</span>    { <span class="cf">return</span> <span class="st">"#28336C"</span> }</span>
<span id="cb67-51"><a href="#cb67-51"></a>        <span class="op">;</span>})</span>
<span id="cb67-52"><a href="#cb67-52"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> ribbon_10)</span>
<span id="cb67-53"><a href="#cb67-53"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)</span>
<span id="cb67-54"><a href="#cb67-54"></a>      <span class="op">.</span><span class="fu">text</span>(d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>names_10[d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> --&gt; </span><span class="sc">${</span>names_10[d<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">index</span>]<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">value</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb67-55"><a href="#cb67-55"></a></span>
<span id="cb67-56"><a href="#cb67-56"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb67-57"><a href="#cb67-57"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-67" data-nodetype="declaration">

</div>
</div>
</div>
<!--- Tilastokeskus --->
</section>
<section id="nettomuutto---kangasala" class="slide level2" data-number="4.11">
<h2><span class="header-section-number">4.11</span> Nettomuutto - Kangasala</h2>
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-3aaa8c90f1ad67f72cdf" style="width:960px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-3aaa8c90f1ad67f72cdf">{"x":{"visdat":{"29044a5b293f":["function () ","plotlyVisDat"]},"cur_data":"29044a5b293f","attrs":{"29044a5b293f":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":50,"l":50,"t":100,"r":50,"pad":3},"autosize":true,"title":"<b>Kuntien välinen muuttovoitto/-tappio, henkilöä<\/b>","legend":{"orientation":"h","x":0,"y":-0.3},"paper_bgcolor":"rgba(0,0,0,0)","plot_bgcolor":"rgba(0,0,0,0)","showlegend":true,"xaxis":{"domain":[0,1],"automargin":true,"title":"<b>Vuodet<\/b>","type":"category","categoryorder":"array","categoryarray":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"<b>Lkm<\/b>","tickformat":"d"},"hovermode":"closest"},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false},"data":[{"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[454,285,168,218,53,-11,61,99,46,4,74,395,213,201,115,250,378],"mode":"lines+markers","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="nettomuutto---naapurikunnat" class="slide level2" data-number="4.12">
<h2><span class="header-section-number">4.12</span> Nettomuutto - Naapurikunnat</h2>
<!--- Tilastokeskus --->
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-3c6cf6c4bf7063aa6838" style="width:960px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-3c6cf6c4bf7063aa6838">{"x":{"visdat":{"290465fa6d76":["function () ","plotlyVisDat"]},"cur_data":"290465fa6d76","attrs":{"290465fa6d76":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"290465fa6d76.1":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(252,179,22)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(252,179,22)","width":2}},"name":"Lempäälä","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"290465fa6d76.2":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(230,73,37)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(230,73,37)","width":2}},"name":"Nokia","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"290465fa6d76.3":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(40,51,108)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(40,51,108)","width":2}},"name":"Pirkkala","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true},"290465fa6d76.4":{"x":{},"y":{},"mode":"lines+markers","line":{"shape":"spline","color":"rgb(0,173,197)","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(0,173,197)","width":2}},"name":"Ylöjärvi","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":50,"l":50,"t":100,"r":50,"pad":3},"autosize":true,"title":"<b>Kuntien välinen muuttovoitto/-tappio, henkilöä<\/b>","legend":{"orientation":"h","x":0,"y":-0.3},"paper_bgcolor":"rgba(0,0,0,0)","plot_bgcolor":"rgba(0,0,0,0)","xaxis":{"domain":[0,1],"automargin":true,"title":"<b>Vuodet<\/b>","type":"category","categoryorder":"array","categoryarray":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"<b>Lkm<\/b>","tickformat":"d"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false},"data":[{"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[454,285,168,218,53,-11,61,99,46,4,74,395,213,201,115,250,378],"mode":"lines+markers","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"name":"Kangasala","type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[346,293,378,313,202,201,75,393,210,209,164,92,3,320,230,173,233],"mode":"lines+markers","line":{"color":"rgb(252,179,22)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(252,179,22)","width":2}},"name":"Lempäälä","type":"scatter","error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[320,445,498,198,179,109,235,117,141,22,217,7,103,196,355,537,370],"mode":"lines+markers","line":{"color":"rgb(230,73,37)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(230,73,37)","width":2}},"name":"Nokia","type":"scatter","error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[152,238,345,216,209,535,323,176,53,164,76,135,-48,46,157,101,294],"mode":"lines+markers","line":{"color":"rgb(40,51,108)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(40,51,108)","width":2}},"name":"Pirkkala","type":"scatter","error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[520,342,408,303,102,88,173,239,31,320,249,-42,-62,18,102,29,20],"mode":"lines+markers","line":{"color":"rgb(0,173,197)","shape":"spline","width":2},"marker":{"color":"rgb(255,255,255)","size":8,"line":{"color":"rgb(0,173,197)","width":2}},"name":"Ylöjärvi","type":"scatter","error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="väestönlisäys" class="slide level2" data-number="4.13">
<h2><span class="header-section-number">4.13</span> Väestönlisäys</h2>
<!--- Tilastokeskus --->
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-727fb01ca114709b90c0" style="width:960px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-727fb01ca114709b90c0">{"x":{"visdat":{"2904ba66f3e":["function () ","plotlyVisDat"]},"cur_data":"2904ba66f3e","attrs":{"2904ba66f3e":{"x":{},"y":{},"marker":{"color":"rgb(222,35,47)"},"name":"Luonnollinen kasvu (syntyneet-kuolleet)","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"2904ba66f3e.1":{"x":{},"y":{},"marker":{"color":"rgb(252,179,22)"},"name":"Kuntien välinen nettomuutto","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","inherit":true},"2904ba66f3e.2":{"x":{},"y":{},"marker":{"color":"rgb(40,51,108)"},"name":"Nettomaahanmuutto","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","inherit":true}},"layout":{"margin":{"b":50,"l":50,"t":100,"r":50,"pad":3},"autosize":true,"title":"<b>Väestönlisäys<\/b>","barmode":"relative","legend":{"orientation":"h","x":0,"y":-0.3},"paper_bgcolor":"rgba(0,0,0,0)","plot_bgcolor":"rgba(0,0,0,0)","showlegend":true,"xaxis":{"domain":[0,1],"automargin":true,"title":"<b>Vuodet<\/b>","type":"category","categoryorder":"array","categoryarray":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"<b>Lkm<\/b>","tickformat":"d","base":0},"hovermode":"closest"},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false},"data":[{"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[148,186,205,214,158,132,132,129,149,80,72,142,14,35,48,58,38],"marker":{"color":"rgb(222,35,47)","line":{"color":"rgba(31,119,180,1)"}},"name":"Luonnollinen kasvu (syntyneet-kuolleet)","type":"bar","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[454,285,168,218,53,-11,61,99,46,4,74,395,213,201,115,250,378],"marker":{"color":"rgb(252,179,22)","line":{"color":"rgba(255,127,14,1)"}},"name":"Kuntien välinen nettomuutto","type":"bar","error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],"y":[19,11,29,38,18,26,24,2,27,41,8,46,21,11,28,38,-4],"marker":{"color":"rgb(40,51,108)","line":{"color":"rgba(44,160,44,1)"}},"name":"Nettomaahanmuutto","type":"bar","error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section></section>
<section>
<section id="väestöennusteet" class="title-slide slide level1 center" data-number="5">
<h1><span class="header-section-number">5</span> Väestöennusteet</h1>

</section>
<section id="toteutunut-väestökehitys-ja-vertailu-eri-väestöennusteisiin" class="slide level2" data-number="5.1">
<h2><span class="header-section-number">5.1</span> Toteutunut väestökehitys ja vertailu eri väestöennusteisiin</h2>
<!--- Github PÄIVITÄ UUSI ENNAKKOTIETOKUUKAUSI! --->
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-32e86622aba71adfd85c" style="width:960px;height:576px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-32e86622aba71adfd85c">{"x":{"visdat":{"29047f133bb4":["function () ","plotlyVisDat"]},"cur_data":"29047f133bb4","attrs":{"29047f133bb4":{"x":{},"name":"Väestö 1987 - 2021","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"lines+markers","line":{"shape":"spline","color":"rgb(222,35,47)","width":2},"marker":{"color":"rgb(222,35,28,0.2)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"inherit":true},"29047f133bb4.1":{"x":{},"name":"Ennuste (2022 päivitetty)","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"lines+markers","line":{"shape":"spline","color":"rgb(0,173,197)","width":0.5},"marker":{"color":"rgb(255,255,255,0.2)","size":8,"line":{"color":"rgb(0,173,197)","width":2}},"inherit":true},"29047f133bb4.2":{"x":{},"name":"Kasvu kiihtyy -skenaario","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"lines+markers","line":{"shape":"spline","color":"rgb(0,150,81)","width":0.5},"marker":{"color":"rgb(255,255,255,0.2)","size":8,"line":{"color":"rgb(0,150,81)","width":2}},"inherit":true},"29047f133bb4.3":{"x":{},"name":"Kasvu pienenee -skenaario","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"lines+markers","line":{"shape":"spline","color":"rgb(252,179,22)","width":0.5},"marker":{"color":"rgb(255,255,255,0.2)","size":8,"line":{"color":"rgb(252,179,22)","width":2}},"inherit":true},"29047f133bb4.4":{"x":{},"name":"Kasvu pysyy nykyisellään -skenaario","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"lines+markers","line":{"shape":"dash","color":"rgb(230,73,37)","width":0.5},"marker":{"color":"rgb(255,255,255,0.2)","size":8,"line":{"color":"rgb(230,73,37)","width":2}},"inherit":true},"29047f133bb4.5":{"x":{},"name":"Ennakkotieto lokakuu 2022","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"markers","marker":{"color":"rgb(254,224,139)","size":8,"line":{"color":"rgb(40,51,108)","width":2}},"inherit":true}},"layout":{"margin":{"b":50,"l":50,"t":100,"r":50,"pad":3},"autosize":true,"title":"<b>Väestöskenaariot<\/b>","legend":{"orientation":"h","x":0,"y":-0.3},"paper_bgcolor":"rgba(0,0,0,0)","plot_bgcolor":"rgba(0,0,0,0)","xaxis":{"domain":[0,1],"automargin":true,"title":"<b>Vuosi<\/b>"},"yaxis":{"domain":[0,1],"automargin":true,"title":"<b>Lkm<\/b>","tickformat":"d"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displaylogo":false},"data":[{"x":[1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"name":"Väestö 1987 - 2021","y":[23589,23656,24054,24407,24634,24826,25105,25056,25106,25046,25119,25133,25285,25630,25922,26341,26778,27303,27927,28407,28809,29282,29522,29675,29891,30126,30345,30471,30607,31190,31437,31676,31868,32214,32622],"type":"scatter","mode":"lines+markers","line":{"color":"rgb(222,35,47)","shape":"spline","width":2},"marker":{"color":"rgb(222,35,28,0.2)","size":8,"line":{"color":"rgb(222,35,47)","width":2}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2021,2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035,2036,2037,2038,2039,2040],"name":"Ennuste (2022 päivitetty)","y":[32650,33250,33800,34300,34800,35300,35800,36300,36800,37300,37700,38100,38500,38900,39300,39640,39980,40320,40660,41000],"type":"scatter","mode":"lines+markers","line":{"color":"rgb(0,173,197)","shape":"spline","width":0.5},"marker":{"color":"rgb(255,255,255,0.2)","size":8,"line":{"color":"rgb(0,173,197)","width":2}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2021,2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035,2036,2037,2038,2039,2040],"name":"Kasvu kiihtyy -skenaario","y":[32700,33180,33660,34140,34620,35100,35580,36050,36530,37000,37400,37800,38200,38600,39000,39400,39800,40200,40600,41000],"type":"scatter","mode":"lines+markers","line":{"color":"rgb(0,150,81)","shape":"spline","width":0.5},"marker":{"color":"rgb(255,255,255,0.2)","size":8,"line":{"color":"rgb(0,150,81)","width":2}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2021,2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035,2036,2037,2038,2039,2040],"name":"Kasvu pienenee -skenaario","y":[32426,32676,32926,33176,33426,33676,33926,34176,34426,34676,34926,35176,35426,35676,35926,36176,36426,36676,36926,37176],"type":"scatter","mode":"lines+markers","line":{"color":"rgb(252,179,22)","shape":"spline","width":0.5},"marker":{"color":"rgb(255,255,255,0.2)","size":8,"line":{"color":"rgb(252,179,22)","width":2}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2021,2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035,2036,2037,2038,2039,2040],"name":"Kasvu pysyy nykyisellään -skenaario","y":[32321,32504,32666,32812,32944,33065,33173,33270,33360,33445,33528,33607,33685,33759,33830,33901,33973,34046,34112,34172],"type":"scatter","mode":"lines+markers","line":{"color":"rgb(230,73,37)","shape":"dash","width":0.5},"marker":{"color":"rgb(255,255,255,0.2)","size":8,"line":{"color":"rgb(230,73,37)","width":2}},"error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2022],"name":"Ennakkotieto lokakuu 2022","y":[32866],"type":"scatter","mode":"markers","marker":{"color":"rgb(254,224,139)","size":8,"line":{"color":"rgb(40,51,108)","width":2}},"error_y":{"color":"rgba(140,86,75,1)"},"error_x":{"color":"rgba(140,86,75,1)"},"line":{"color":"rgba(140,86,75,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>

<img src="../themes/Kangasala_logo_RGB_color.png" class="slide-logo r-stretch"><div class="footer footer-default">
<p>Copyright 2022 Kangasalan kaupunki, LGPL 2.1</p>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script type="ojs-module-contents">
    {"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"d3 = require(\"d3@7\")\n\ndata = d3.csv(\"https://gist.githubusercontent.com/Juuso1/4b92d153a02263380b2560f2e7e42d09/raw/muuttoliike_kangasala_2021.csv\", d3.autoType)\n\ndata_2 = d3.csv(\"https://gist.githubusercontent.com/Juuso1/f2fcdaf8c6053f315f1bc1a67bbd4c61/raw/kangasala_tampere_pienalue_2021.csv\", d3.autoType)\n\ndata_3 = d3.csv(\"https://gist.githubusercontent.com/Juuso1/722dc5a035c757f2032125fbea751142/raw/kangasala_lempaala_pienalue_2021.csv\", d3.autoType)\n\ndata_4 = d3.csv(\"https://gist.githubusercontent.com/Juuso1/145ce37f1f10433c6cbc4831f244602e/raw/kangasala_nokia_pienalue_2021.csv\", d3.autoType)\n\ndata_5 = d3.csv(\"https://gist.githubusercontent.com/Juuso1/7951de54348c5de46db9e4bf3173afe6/raw/kangasala_orivesi_pienalue.csv\", d3.autoType)\n\ndata_6 = d3.csv(\"https://gist.githubusercontent.com/Juuso1/e66c94b930972e105c450045aea8c7b2/raw/kangasala_pirkkala_pienalue_2021.csv\", d3.autoType)\n\ndata_7 = d3.csv(\"https://gist.githubusercontent.com/Juuso1/5690853d57d677826555a37f759c1c95/raw/kangasala_palkane_pienalue_2021.csv\", d3.autoType)\n\ndata_8 = d3.csv(\"https://gist.githubusercontent.com/Juuso1/dcb98508964bc6c255280637be4135cc/raw/kangasala_akaa_pienalue.csv\", d3.autoType)\n\ndata_9 = d3.csv(\"https://gist.githubusercontent.com/Juuso1/22b5fe1ec9e3a8bf353c7b17a301d4a9/raw/kangasala_valkeakoski-pienalueet.csv\", d3.autoType)\n\ndata_10 = d3.csv(\"https://gist.githubusercontent.com/Juuso1/47bebabe370259a9a5ae2709460fac9b/raw/kangasala_ylojarvi_pienalueet.csv\", d3.autoType)\n\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"height = width\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"width = 300\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"innerRadius = Math.min(width, height) * .3 - 40\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"outerRadius = innerRadius + 20\n"},{"methodName":"interpret","cellName":"ojs-cell-6","inline":false,"source":"color = d3.scaleOrdinal(names, d3.schemeCategory10)\n"},{"methodName":"interpret","cellName":"ojs-cell-7","inline":false,"source":"ribbon = d3.ribbon()\n    .radius(innerRadius - 1)\n    .padAngle(0.8/ innerRadius)\n"},{"methodName":"interpret","cellName":"ojs-cell-8","inline":false,"source":"arc = d3.arc()\n    .innerRadius(innerRadius)\n    .outerRadius(outerRadius)\n"},{"methodName":"interpret","cellName":"ojs-cell-9","inline":false,"source":"chord = d3.chordDirected()\n    .padAngle(0.8 / innerRadius)\n    .sortSubgroups(d3.ascending)\n    .sortChords(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-10","inline":false,"source":"matrix = {\n  const index = new Map(names.map((name, i) => [name, i]));\n  const matrix = Array.from(index, () => new Array(names.length).fill(0));\n  for (const {source, target, value} of data) matrix[index.get(source)][index.get(target)] += value;\n  return matrix;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-11","inline":false,"source":"names = Array.from(new Set(data.flatMap(d => [d.source, d.target]))).sort(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-12","inline":false,"source":"rename = name => name.substring(name.indexOf(\".\") + 1, name.lastIndexOf(\".\"))\n"},{"methodName":"interpret","cellName":"ojs-cell-13","inline":false,"source":"chart = {\n\n  let sum_target;\n  let sum_source;\n  let sum_yht;\n\n  const svg = d3.create(\"svg\")\n      .attr(\"viewBox\", [-width / 2, -height / 3, width, height]);\n\n  const chords = chord(matrix);\n\n  const group = svg.append(\"g\")\n      .attr(\"font-size\", 2)\n      .attr(\"font-family\", \"Century Gothic\")\n      .attr(\"font-weight\", \"bold\")\n    .selectAll(\"g\")\n    .data(chords.groups)\n    .join(\"g\");\n\n  group.append(\"path\")\n      .attr(\"fill\", d => {\n\n           sum_target = d3.sum(chords, c => (c.target.index === d.index) * c.target.value);\n           sum_source = d3.sum(chords, c => (c.source.index === d.index) * c.source.value);\n           sum_yht = sum_target-sum_source;\n            if (sum_yht > 0) { return \"#009651\" }\n            else if (sum_yht == 0) { return \"#28336C\" }\n            else \t{ return \"#DE232F\" }\n        })\n      .attr(\"d\", arc);\n  \n  group.append(\"text\")\n      .each(d => (d.angle = (d.startAngle + d.endAngle) / 2))\n      .attr(\"dy\", \"0.35em\")\n      .attr(\"transform\", d => `\n        rotate(${(d.angle * 180 / Math.PI - 90)})\n        translate(${outerRadius + 5})\n        ${d.angle > Math.PI ? \"rotate(180)\" : \"\"}\n      `)\n      .attr(\"text-anchor\", d => d.angle > Math.PI ? \"end\" : null)\n      .text(d => names[d.index])\n            .attr(\"fill\", d => {\n\n           sum_target = d3.sum(chords, c => (c.target.index === d.index) * c.target.value);\n           sum_source = d3.sum(chords, c => (c.source.index === d.index) * c.source.value);\n           sum_yht = sum_target-sum_source;\n            if (sum_yht > 0) { return \"#009651\" }\n            else if (sum_yht == 0) { return \"#28336C\" }\n            else \t{ return \"#DE232F\" }\n        });\n\n  group.append(\"title\")\n      .text(d => `${names[d.index]}\n${d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} lähtee →\n${d3.sum(chords, c => (c.target.index === d.index) * c.source.value)} tulee ←\n${d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} netto =`);  \n\n  svg.append(\"g\")\n      .attr(\"fill-opacity\", 0.75)\n    .selectAll(\"path\")\n    .data(chords)\n    .join(\"path\")\n      .style(\"mix-blend-mode\", \"multiply\")\n      //.attr(\"fill\", d => color(names[d.source.index]))\n      .attr(\"fill\", d => {\n            //if (names[d.index] === \"Kangasala\") {return \"#DE232F\"}\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#28336C\"}\n            else \t{ return \"#28336C\" }\n        ;})\n      .attr(\"d\", ribbon)\n    .append(\"title\")\n      .text(d => `${names[d.source.index]} --> ${names[d.target.index]} ${d.source.value}`);\n\n  return svg.node();\n}\n\n"},{"methodName":"interpret","cellName":"ojs-cell-14","inline":false,"source":"ribbon_2 = d3.ribbon()\n    .radius(innerRadius - 1)\n    .padAngle(0.4/ innerRadius)\n"},{"methodName":"interpret","cellName":"ojs-cell-15","inline":false,"source":"chord_2 = d3.chordDirected()\n    .padAngle(1 / innerRadius)\n    .sortSubgroups(d3.ascending)\n    .sortChords(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-16","inline":false,"source":"matrix_2 = {\n  const index = new Map(names_2.map((name, i) => [name, i]));\n  const matrix_2 = Array.from(index, () => new Array(names_2.length).fill(0));\n  for (const {source, target, value} of data_2) matrix_2[index.get(source)][index.get(target)] += value;\n  return matrix_2;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-17","inline":false,"source":"names_2 = Array.from(new Set(data_2.flatMap(d => [d.source, d.target]))).sort(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-18","inline":false,"source":"rename_2 = name => name.substring(name.indexOf(\".\") + 1, name.lastIndexOf(\".\"))\n"},{"methodName":"interpret","cellName":"ojs-cell-19","inline":false,"source":"chart_2 = {\n  const svg = d3.create(\"svg\")\n      .attr(\"viewBox\", [-width / 2, -height / 3, width, height]);\n\n  const chords = chord_2(matrix_2);\n\n  const group = svg.append(\"g\")\n      .attr(\"font-size\", 2)\n      .attr(\"font-family\", \"Century Gothic\")\n      .attr(\"font-weight\", \"bold\")\n    .selectAll(\"g\")\n    .data(chords.groups)\n    .join(\"g\");\n\n  group.append(\"path\")\n      .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;})\n      .attr(\"d\", arc);\n  \n  group.append(\"text\")\n      .each(d => (d.angle = (d.startAngle + d.endAngle) / 2))\n      .attr(\"dy\", \"0.35em\")\n      .attr(\"transform\", d => `\n        rotate(${(d.angle * 180 / Math.PI - 90)})\n        translate(${outerRadius + 5})\n        ${d.angle > Math.PI ? \"rotate(180)\" : \"\"}\n      `)\n      .attr(\"text-anchor\", d => d.angle > Math.PI ? \"end\" : null)\n      .text(d => names_2[d.index])\n        .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;});\n\n  group.append(\"title\")\n      .text(d => `${names_2[d.index]}\n${d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} lähtee →\n${d3.sum(chords, c => (c.target.index === d.index) * c.source.value)} tulee ←\n${d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} netto =`);  \n\n  svg.append(\"g\")\n      .attr(\"fill-opacity\", 0.75)\n    .selectAll(\"path\")\n    .data(chords)\n    .join(\"path\")\n      .style(\"mix-blend-mode\", \"multiply\")\n        .attr(\"fill\", d => {\n                        if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#28336C\"}\n            else \t{ return \"#28336C\" }\n        ;})\n      .attr(\"d\", ribbon_2)\n    .append(\"title\")\n      .text(d => `${names_2[d.source.index]} --> ${names_2[d.target.index]} ${d.source.value}`);\n\n  return svg.node();\n}\n\n"},{"methodName":"interpret","cellName":"ojs-cell-20","inline":false,"source":"ribbon_3 = d3.ribbon()\n    .radius(innerRadius - 1)\n    .padAngle(2.5/ innerRadius)\n"},{"methodName":"interpret","cellName":"ojs-cell-21","inline":false,"source":"chord_3 = d3.chordDirected()\n    .padAngle(1 / innerRadius)\n    .sortSubgroups(d3.ascending)\n    .sortChords(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-22","inline":false,"source":"matrix_3 = {\n  const index = new Map(names_3.map((name, i) => [name, i]));\n  const matrix_3 = Array.from(index, () => new Array(names_3.length).fill(0));\n  for (const {source, target, value} of data_3) matrix_3[index.get(source)][index.get(target)] += value;\n  return matrix_3;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-23","inline":false,"source":"names_3 = Array.from(new Set(data_3.flatMap(d => [d.source, d.target]))).sort(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-24","inline":false,"source":"rename_3 = name => name.substring(name.indexOf(\".\") + 1, name.lastIndexOf(\".\"))\n"},{"methodName":"interpret","cellName":"ojs-cell-25","inline":false,"source":"chart_3 = {\n  const svg = d3.create(\"svg\")\n      .attr(\"viewBox\", [-width / 2, -height / 3, width, height]);\n\n  const chords = chord_3(matrix_3);\n\n  const group = svg.append(\"g\")\n      .attr(\"font-size\", 2)\n      .attr(\"font-family\", \"Century Gothic\")\n      .attr(\"font-weight\", \"bold\")\n    .selectAll(\"g\")\n    .data(chords.groups)\n    .join(\"g\");\n\n  group.append(\"path\")\n      .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;})\n      .attr(\"d\", arc);\n  \n  group.append(\"text\")\n      .each(d => (d.angle = (d.startAngle + d.endAngle) / 2))\n      .attr(\"dy\", \"0.35em\")\n      .attr(\"transform\", d => `\n        rotate(${(d.angle * 180 / Math.PI - 90)})\n        translate(${outerRadius + 5})\n        ${d.angle > Math.PI ? \"rotate(180)\" : \"\"}\n      `)\n      .attr(\"text-anchor\", d => d.angle > Math.PI ? \"end\" : null)\n      .text(d => names_3[d.index])\n              .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;});\n\n  group.append(\"title\")\n      .text(d => `${names_3[d.index]}\n${d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} lähtee →\n${d3.sum(chords, c => (c.target.index === d.index) * c.source.value)} tulee ←\n${d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} netto =`);  \n\n\n  svg.append(\"g\")\n      .attr(\"fill-opacity\", 0.75)\n    .selectAll(\"path\")\n    .data(chords)\n    .join(\"path\")\n      .style(\"mix-blend-mode\", \"multiply\")\n        .attr(\"fill\", d => {\n                        if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#28336C\"}\n            else \t{ return \"#28336C\" }\n        ;})\n      .attr(\"d\", ribbon_3)\n    .append(\"title\")\n      .text(d => `${names_3[d.source.index]} --> ${names_3[d.target.index]} ${d.source.value}`);\n\n  return svg.node();\n}\n\n"},{"methodName":"interpret","cellName":"ojs-cell-26","inline":false,"source":"ribbon_4 = d3.ribbon()\n    .radius(innerRadius - 1)\n    .padAngle(3.5/ innerRadius)\n"},{"methodName":"interpret","cellName":"ojs-cell-27","inline":false,"source":"chord_4 = d3.chordDirected()\n    .padAngle(1 / innerRadius)\n    .sortSubgroups(d3.ascending)\n    .sortChords(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-28","inline":false,"source":"matrix_4 = {\n  const index = new Map(names_4.map((name, i) => [name, i]));\n  const matrix_4 = Array.from(index, () => new Array(names_4.length).fill(0));\n  for (const {source, target, value} of data_4) matrix_4[index.get(source)][index.get(target)] += value;\n  return matrix_4;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-29","inline":false,"source":"names_4 = Array.from(new Set(data_4.flatMap(d => [d.source, d.target]))).sort(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-30","inline":false,"source":"rename_4 = name => name.substring(name.indexOf(\".\") + 1, name.lastIndexOf(\".\"))\n"},{"methodName":"interpret","cellName":"ojs-cell-31","inline":false,"source":"chart_4 = {\n  const svg = d3.create(\"svg\")\n      .attr(\"viewBox\", [-width / 2, -height / 3, width, height]);\n\n  const chords = chord_4(matrix_4);\n\n  const group = svg.append(\"g\")\n      .attr(\"font-size\", 2)\n      .attr(\"font-family\", \"Century Gothic\")\n      .attr(\"font-weight\", \"bold\")\n    .selectAll(\"g\")\n    .data(chords.groups)\n    .join(\"g\");\n\n  group.append(\"path\")\n      .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;})\n      .attr(\"d\", arc);\n  \n  group.append(\"text\")\n      .each(d => (d.angle = (d.startAngle + d.endAngle) / 2))\n      .attr(\"dy\", \"0.35em\")\n      .attr(\"transform\", d => `\n        rotate(${(d.angle * 180 / Math.PI - 90)})\n        translate(${outerRadius + 5})\n        ${d.angle > Math.PI ? \"rotate(180)\" : \"\"}\n      `)\n      .attr(\"text-anchor\", d => d.angle > Math.PI ? \"end\" : null)\n      .text(d => names_4[d.index])\n              .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;});\n\n  group.append(\"title\")\n      .text(d => `${names_4[d.index]}\n${d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} lähtee →\n${d3.sum(chords, c => (c.target.index === d.index) * c.source.value)} tulee ←\n${d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} netto =`);  \n\n\n  svg.append(\"g\")\n      .attr(\"fill-opacity\", 0.75)\n    .selectAll(\"path\")\n    .data(chords)\n    .join(\"path\")\n      .style(\"mix-blend-mode\", \"multiply\")\n              .attr(\"fill\", d => {\n                        if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#28336C\"}\n            else \t{ return \"#28336C\" }\n        ;})\n      .attr(\"d\", ribbon_4)\n    .append(\"title\")\n      .text(d => `${names_4[d.source.index]} --> ${names_4[d.target.index]} ${d.source.value}`);\n\n  return svg.node();\n}\n\n"},{"methodName":"interpret","cellName":"ojs-cell-32","inline":false,"source":"ribbon_5 = d3.ribbon()\n    .radius(innerRadius - 1)\n    .padAngle(3.5/ innerRadius)\n"},{"methodName":"interpret","cellName":"ojs-cell-33","inline":false,"source":"chord_5 = d3.chordDirected()\n    .padAngle(1 / innerRadius)\n    .sortSubgroups(d3.ascending)\n    .sortChords(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-34","inline":false,"source":"matrix_5 = {\n  const index = new Map(names_5.map((name, i) => [name, i]));\n  const matrix_5 = Array.from(index, () => new Array(names_5.length).fill(0));\n  for (const {source, target, value} of data_5) matrix_5[index.get(source)][index.get(target)] += value;\n  return matrix_5;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-35","inline":false,"source":"names_5 = Array.from(new Set(data_5.flatMap(d => [d.source, d.target]))).sort(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-36","inline":false,"source":"rename_5 = name => name.substring(name.indexOf(\".\") + 1, name.lastIndexOf(\".\"))\n"},{"methodName":"interpret","cellName":"ojs-cell-37","inline":false,"source":"chart_5 = {\n  const svg = d3.create(\"svg\")\n      .attr(\"viewBox\", [-width / 2, -height / 3, width, height]);\n\n  const chords = chord_5(matrix_5);\n\n  const group = svg.append(\"g\")\n      .attr(\"font-size\", 2)\n      .attr(\"font-family\", \"Century Gothic\")\n      .attr(\"font-weight\", \"bold\")\n    .selectAll(\"g\")\n    .data(chords.groups)\n    .join(\"g\");\n\n  group.append(\"path\")\n      .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;})\n      .attr(\"d\", arc);\n  \n  group.append(\"text\")\n      .each(d => (d.angle = (d.startAngle + d.endAngle) / 2))\n      .attr(\"dy\", \"0.35em\")\n      .attr(\"transform\", d => `\n        rotate(${(d.angle * 180 / Math.PI - 90)})\n        translate(${outerRadius + 5})\n        ${d.angle > Math.PI ? \"rotate(180)\" : \"\"}\n      `)\n      .attr(\"text-anchor\", d => d.angle > Math.PI ? \"end\" : null)\n      .text(d => names_5[d.index])\n              .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;});\n\n  group.append(\"title\")\n      .text(d => `${names_5[d.index]}\n${d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} lähtee →\n${d3.sum(chords, c => (c.target.index === d.index) * c.source.value)} tulee ←\n${d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} netto =`);  \n\n\n  svg.append(\"g\")\n      .attr(\"fill-opacity\", 0.75)\n    .selectAll(\"path\")\n    .data(chords)\n    .join(\"path\")\n      .style(\"mix-blend-mode\", \"multiply\")\n              .attr(\"fill\", d => {\n                        if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#28336C\"}\n            else \t{ return \"#28336C\" }\n        ;})\n      .attr(\"d\", ribbon_5)\n    .append(\"title\")\n      .text(d => `${names_5[d.source.index]} --> ${names_5[d.target.index]} ${d.source.value}`);\n\n  return svg.node();\n}\n\n"},{"methodName":"interpret","cellName":"ojs-cell-38","inline":false,"source":"ribbon_6 = d3.ribbon()\n    .radius(innerRadius - 1)\n    .padAngle(3.5/ innerRadius)\n"},{"methodName":"interpret","cellName":"ojs-cell-39","inline":false,"source":"chord_6 = d3.chordDirected()\n    .padAngle(1 / innerRadius)\n    .sortSubgroups(d3.ascending)\n    .sortChords(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-40","inline":false,"source":"matrix_6 = {\n  const index = new Map(names_6.map((name, i) => [name, i]));\n  const matrix_6 = Array.from(index, () => new Array(names_6.length).fill(0));\n  for (const {source, target, value} of data_6) matrix_6[index.get(source)][index.get(target)] += value;\n  return matrix_6;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-41","inline":false,"source":"names_6 = Array.from(new Set(data_6.flatMap(d => [d.source, d.target]))).sort(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-42","inline":false,"source":"rename_6 = name => name.substring(name.indexOf(\".\") + 1, name.lastIndexOf(\".\"))\n"},{"methodName":"interpret","cellName":"ojs-cell-43","inline":false,"source":"chart_6 = {\n  const svg = d3.create(\"svg\")\n      .attr(\"viewBox\", [-width / 2, -height / 3, width, height]);\n\n  const chords = chord_6(matrix_6);\n\n  const group = svg.append(\"g\")\n      .attr(\"font-size\", 2)\n      .attr(\"font-family\", \"Century Gothic\")\n      .attr(\"font-weight\", \"bold\")\n    .selectAll(\"g\")\n    .data(chords.groups)\n    .join(\"g\");\n\n  group.append(\"path\")\n      .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;})\n      .attr(\"d\", arc);\n  \n  group.append(\"text\")\n      .each(d => (d.angle = (d.startAngle + d.endAngle) / 2))\n      .attr(\"dy\", \"0.35em\")\n      .attr(\"transform\", d => `\n        rotate(${(d.angle * 180 / Math.PI - 90)})\n        translate(${outerRadius + 5})\n        ${d.angle > Math.PI ? \"rotate(180)\" : \"\"}\n      `)\n      .attr(\"text-anchor\", d => d.angle > Math.PI ? \"end\" : null)\n      .text(d => names_6[d.index])\n              .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;});\n\n  group.append(\"title\")\n      .text(d => `${names_6[d.index]}\n${d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} lähtee →\n${d3.sum(chords, c => (c.target.index === d.index) * c.source.value)} tulee ←\n${d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} netto =`);  \n\n\n  svg.append(\"g\")\n      .attr(\"fill-opacity\", 0.75)\n    .selectAll(\"path\")\n    .data(chords)\n    .join(\"path\")\n      .style(\"mix-blend-mode\", \"multiply\")\n              .attr(\"fill\", d => {\n                        if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#28336C\"}\n            else \t{ return \"#28336C\" }\n        ;})\n      .attr(\"d\", ribbon_6)\n    .append(\"title\")\n      .text(d => `${names_6[d.source.index]} --> ${names_6[d.target.index]} ${d.source.value}`);\n\n  return svg.node();\n}\n\n"},{"methodName":"interpret","cellName":"ojs-cell-44","inline":false,"source":"ribbon_7 = d3.ribbon()\n    .radius(innerRadius - 1)\n    .padAngle(2/ innerRadius)\n"},{"methodName":"interpret","cellName":"ojs-cell-45","inline":false,"source":"chord_7 = d3.chordDirected()\n    .padAngle(1 / innerRadius)\n    .sortSubgroups(d3.ascending)\n    .sortChords(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-46","inline":false,"source":"matrix_7 = {\n  const index = new Map(names_7.map((name, i) => [name, i]));\n  const matrix_7 = Array.from(index, () => new Array(names_7.length).fill(0));\n  for (const {source, target, value} of data_7) matrix_7[index.get(source)][index.get(target)] += value;\n  return matrix_7;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-47","inline":false,"source":"names_7 = Array.from(new Set(data_7.flatMap(d => [d.source, d.target]))).sort(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-48","inline":false,"source":"rename_7 = name => name.substring(name.indexOf(\".\") + 1, name.lastIndexOf(\".\"))\n"},{"methodName":"interpret","cellName":"ojs-cell-49","inline":false,"source":"chart_7 = {\n  const svg = d3.create(\"svg\")\n      .attr(\"viewBox\", [-width / 2, -height / 3, width, height]);\n\n  const chords = chord_7(matrix_7);\n\n  const group = svg.append(\"g\")\n      .attr(\"font-size\", 2)\n      .attr(\"font-family\", \"Century Gothic\")\n      .attr(\"font-weight\", \"bold\")\n    .selectAll(\"g\")\n    .data(chords.groups)\n    .join(\"g\");\n\n  group.append(\"path\")\n      .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;})\n      .attr(\"d\", arc);\n  \n  group.append(\"text\")\n      .each(d => (d.angle = (d.startAngle + d.endAngle) / 2))\n      .attr(\"dy\", \"0.35em\")\n      .attr(\"transform\", d => `\n        rotate(${(d.angle * 180 / Math.PI - 90)})\n        translate(${outerRadius + 5})\n        ${d.angle > Math.PI ? \"rotate(180)\" : \"\"}\n      `)\n      .attr(\"text-anchor\", d => d.angle > Math.PI ? \"end\" : null)\n      .text(d => names_7[d.index])\n              .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;});\n\n  group.append(\"title\")\n      .text(d => `${names_7[d.index]}\n${d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} lähtee →\n${d3.sum(chords, c => (c.target.index === d.index) * c.source.value)} tulee ←\n${d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} netto =`);  \n\n\n  svg.append(\"g\")\n      .attr(\"fill-opacity\", 0.75)\n    .selectAll(\"path\")\n    .data(chords)\n    .join(\"path\")\n      .style(\"mix-blend-mode\", \"multiply\")\n              .attr(\"fill\", d => {\n                        if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#28336C\"}\n            else \t{ return \"#28336C\" }\n        ;})\n      .attr(\"d\", ribbon_7)\n    .append(\"title\")\n      .text(d => `${names_7[d.source.index]} --> ${names_7[d.target.index]} ${d.source.value}`);\n\n  return svg.node();\n}\n\n"},{"methodName":"interpret","cellName":"ojs-cell-50","inline":false,"source":"ribbon_8 = d3.ribbon()\n    .radius(innerRadius - 1)\n    .padAngle(4/ innerRadius)\n"},{"methodName":"interpret","cellName":"ojs-cell-51","inline":false,"source":"chord_8 = d3.chordDirected()\n    .padAngle(1 / innerRadius)\n    .sortSubgroups(d3.ascending)\n    .sortChords(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-52","inline":false,"source":"matrix_8 = {\n  const index = new Map(names_8.map((name, i) => [name, i]));\n  const matrix_8 = Array.from(index, () => new Array(names_8.length).fill(0));\n  for (const {source, target, value} of data_8) matrix_8[index.get(source)][index.get(target)] += value;\n  return matrix_8;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-53","inline":false,"source":"names_8 = Array.from(new Set(data_8.flatMap(d => [d.source, d.target]))).sort(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-54","inline":false,"source":"rename_8 = name => name.substring(name.indexOf(\".\") + 1, name.lastIndexOf(\".\"))\n"},{"methodName":"interpret","cellName":"ojs-cell-55","inline":false,"source":"chart_8 = {\n  const svg = d3.create(\"svg\")\n      .attr(\"viewBox\", [-width / 2, -height / 3, width, height]);\n\n  const chords = chord_8(matrix_8);\n\n  const group = svg.append(\"g\")\n      .attr(\"font-size\", 2)\n      .attr(\"font-family\", \"Century Gothic\")\n      .attr(\"font-weight\", \"bold\")\n    .selectAll(\"g\")\n    .data(chords.groups)\n    .join(\"g\");\n\n  group.append(\"path\")\n      .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;})\n      .attr(\"d\", arc);\n  \n  group.append(\"text\")\n      .each(d => (d.angle = (d.startAngle + d.endAngle) / 2))\n      .attr(\"dy\", \"0.35em\")\n      .attr(\"transform\", d => `\n        rotate(${(d.angle * 180 / Math.PI - 90)})\n        translate(${outerRadius + 5})\n        ${d.angle > Math.PI ? \"rotate(180)\" : \"\"}\n      `)\n      .attr(\"text-anchor\", d => d.angle > Math.PI ? \"end\" : null)\n      .text(d => names_8[d.index])\n              .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;});\n\n  group.append(\"title\")\n      .text(d => `${names_8[d.index]}\n${d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} lähtee →\n${d3.sum(chords, c => (c.target.index === d.index) * c.source.value)} tulee ←\n${d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} netto =`);  \n\n\n  svg.append(\"g\")\n      .attr(\"fill-opacity\", 0.75)\n    .selectAll(\"path\")\n    .data(chords)\n    .join(\"path\")\n      .style(\"mix-blend-mode\", \"multiply\")\n              .attr(\"fill\", d => {\n                        if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#28336C\"}\n            else \t{ return \"#28336C\" }\n        ;})\n      .attr(\"d\", ribbon_8)\n    .append(\"title\")\n      .text(d => `${names_8[d.source.index]} --> ${names_8[d.target.index]} ${d.source.value}`);\n\n  return svg.node();\n}\n\n"},{"methodName":"interpret","cellName":"ojs-cell-56","inline":false,"source":"ribbon_9 = d3.ribbon()\n    .radius(innerRadius - 1)\n    .padAngle(3.5/ innerRadius)\n"},{"methodName":"interpret","cellName":"ojs-cell-57","inline":false,"source":"chord_9 = d3.chordDirected()\n    .padAngle(1 / innerRadius)\n    .sortSubgroups(d3.ascending)\n    .sortChords(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-58","inline":false,"source":"matrix_9 = {\n  const index = new Map(names_9.map((name, i) => [name, i]));\n  const matrix_9 = Array.from(index, () => new Array(names_9.length).fill(0));\n  for (const {source, target, value} of data_9) matrix_9[index.get(source)][index.get(target)] += value;\n  return matrix_9;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-59","inline":false,"source":"names_9 = Array.from(new Set(data_9.flatMap(d => [d.source, d.target]))).sort(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-60","inline":false,"source":"rename_9 = name => name.substring(name.indexOf(\".\") + 1, name.lastIndexOf(\".\"))\n"},{"methodName":"interpret","cellName":"ojs-cell-61","inline":false,"source":"chart_9 = {\n  const svg = d3.create(\"svg\")\n      .attr(\"viewBox\", [-width / 2, -height / 3, width, height]);\n\n  const chords = chord_9(matrix_9);\n\n  const group = svg.append(\"g\")\n      .attr(\"font-size\", 2)\n      .attr(\"font-family\", \"Century Gothic\")\n      .attr(\"font-weight\", \"bold\")\n    .selectAll(\"g\")\n    .data(chords.groups)\n    .join(\"g\");\n\n  group.append(\"path\")\n      .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;})\n      .attr(\"d\", arc);\n  \n  group.append(\"text\")\n      .each(d => (d.angle = (d.startAngle + d.endAngle) / 2))\n      .attr(\"dy\", \"0.35em\")\n      .attr(\"transform\", d => `\n        rotate(${(d.angle * 180 / Math.PI - 90)})\n        translate(${outerRadius + 5})\n        ${d.angle > Math.PI ? \"rotate(180)\" : \"\"}\n      `)\n      .attr(\"text-anchor\", d => d.angle > Math.PI ? \"end\" : null)\n      .text(d => names_9[d.index])\n              .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;});\n\n  group.append(\"title\")\n      .text(d => `${names_9[d.index]}\n${d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} lähtee →\n${d3.sum(chords, c => (c.target.index === d.index) * c.source.value)} tulee ←\n${d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} netto =`);  \n\n\n  svg.append(\"g\")\n      .attr(\"fill-opacity\", 0.75)\n    .selectAll(\"path\")\n    .data(chords)\n    .join(\"path\")\n      .style(\"mix-blend-mode\", \"multiply\")\n              .attr(\"fill\", d => {\n                        if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#28336C\"}\n            else \t{ return \"#28336C\" }\n        ;})\n      .attr(\"d\", ribbon_9)\n    .append(\"title\")\n      .text(d => `${names_9[d.source.index]} --> ${names_9[d.target.index]} ${d.source.value}`);\n\n  return svg.node();\n}\n\n"},{"methodName":"interpret","cellName":"ojs-cell-62","inline":false,"source":"ribbon_10 = d3.ribbon()\n    .radius(innerRadius - 1)\n    .padAngle(4/ innerRadius)\n"},{"methodName":"interpret","cellName":"ojs-cell-63","inline":false,"source":"chord_10 = d3.chordDirected()\n    .padAngle(1 / innerRadius)\n    .sortSubgroups(d3.ascending)\n    .sortChords(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-64","inline":false,"source":"matrix_10 = {\n  const index = new Map(names_10.map((name, i) => [name, i]));\n  const matrix_10 = Array.from(index, () => new Array(names_10.length).fill(0));\n  for (const {source, target, value} of data_10) matrix_10[index.get(source)][index.get(target)] += value;\n  return matrix_10;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-65","inline":false,"source":"names_10 = Array.from(new Set(data_10.flatMap(d => [d.source, d.target]))).sort(d3.ascending)\n"},{"methodName":"interpret","cellName":"ojs-cell-66","inline":false,"source":"rename_10 = name => name.substring(name.indexOf(\".\") + 1, name.lastIndexOf(\".\"))\n"},{"methodName":"interpret","cellName":"ojs-cell-67","inline":false,"source":"chart_10 = {\n  const svg = d3.create(\"svg\")\n      .attr(\"viewBox\", [-width / 2, -height / 3, width, height]);\n\n  const chords = chord_10(matrix_10);\n\n  const group = svg.append(\"g\")\n      .attr(\"font-size\", 2)\n      .attr(\"font-family\", \"Century Gothic\")\n      .attr(\"font-weight\", \"bold\")\n    .selectAll(\"g\")\n    .data(chords.groups)\n    .join(\"g\");\n\n  group.append(\"path\")\n      .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;})\n      .attr(\"d\", arc);\n  \n  group.append(\"text\")\n      .each(d => (d.angle = (d.startAngle + d.endAngle) / 2))\n      .attr(\"dy\", \"0.35em\")\n      .attr(\"transform\", d => `\n        rotate(${(d.angle * 180 / Math.PI - 90)})\n        translate(${outerRadius + 5})\n        ${d.angle > Math.PI ? \"rotate(180)\" : \"\"}\n      `)\n      .attr(\"text-anchor\", d => d.angle > Math.PI ? \"end\" : null)\n      .text(d => names_10[d.index])\n              .attr(\"fill\", d => {\n            if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#009651\"}\n            else \t{ return \"#DE232F\" }\n        ;});\n\n  group.append(\"title\")\n      .text(d => `${names_10[d.index]}\n${d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} lähtee →\n${d3.sum(chords, c => (c.target.index === d.index) * c.source.value)} tulee ←\n${d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)} netto =`);  \n\n\n  svg.append(\"g\")\n      .attr(\"fill-opacity\", 0.75)\n    .selectAll(\"path\")\n    .data(chords)\n    .join(\"path\")\n      .style(\"mix-blend-mode\", \"multiply\")\n              .attr(\"fill\", d => {\n                        if ((d3.sum(chords, c => (c.target.index === d.index) * c.target.value)- d3.sum(chords, c => (c.source.index === d.index) * c.source.value)) >= 0) {return \"#28336C\"}\n            else \t{ return \"#28336C\" }\n        ;})\n      .attr(\"d\", ribbon_10)\n    .append(\"title\")\n      .text(d => `${names_10[d.source.index]} --> ${names_10[d.target.index]} ${d.source.value}`);\n\n  return svg.node();\n}\n\n"}]}
    </script>
    <script type="module">
    if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
    window._ojs.paths.runtimeToDoc = "../../..";
    window._ojs.paths.runtimeToRoot = "../../../..";
    window._ojs.paths.docToRoot = "..";
    window._ojs.selfContained = false;
    window._ojs.runtime.interpretFromScriptTags();
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>